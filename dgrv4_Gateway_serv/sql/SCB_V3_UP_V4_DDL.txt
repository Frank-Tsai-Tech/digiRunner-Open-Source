ALTER TABLE AUTHORITIES DROP CONSTRAINT AUTHORITIES_FK;
ALTER TABLE AUTHORITIES ALTER COLUMN USERNAME nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGD ALTER COLUMN PARAM1 nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGD ALTER COLUMN PARAM2 nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGD ALTER COLUMN PARAM3 nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGD ALTER COLUMN PARAM4 nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGD ALTER COLUMN PARAM5 nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGD ALTER COLUMN STACK_TRACE nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGD ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;

--修改 CREATE_USER 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id('DGR_AUDIT_LOGD')
    AND col_name(parent_object_id, parent_column_id) = 'CREATE_USER';

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE DGR_AUDIT_LOGD DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go
-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE DGR_AUDIT_LOGD ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGD ADD CONSTRAINT DGR_AUDIT_LOGD_create_user DEFAULT 'SYSTEM' FOR CREATE_USER;
ALTER TABLE DGR_AUDIT_LOGM ALTER COLUMN USER_NAME nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE DGR_AUDIT_LOGM ALTER COLUMN API_URL nvarchar(500) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE DGR_AUDIT_LOGM ALTER COLUMN ORIG_API_URL nvarchar(500) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGM ALTER COLUMN PARAM1 nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGM ALTER COLUMN PARAM2 nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGM ALTER COLUMN PARAM3 nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGM ALTER COLUMN PARAM4 nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGM ALTER COLUMN PARAM5 nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGM ALTER COLUMN STACK_TRACE nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGM ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改 CREATE_USER 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id('DGR_AUDIT_LOGM')
    AND col_name(parent_object_id, parent_column_id) = 'CREATE_USER';

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE DGR_AUDIT_LOGM DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go
-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE DGR_AUDIT_LOGM ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE DGR_AUDIT_LOGM ADD CONSTRAINT DGR_AUDIT_LOGM_create_user DEFAULT 'SYSTEM' FOR CREATE_USER;
CREATE TABLE DGR_COMPOSER_FLOW (
        FLOW_ID bigint NOT NULL,
        MODULE_NAME nvarchar(150) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        API_ID nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        FLOW_DATA varbinary(MAX) NULL,
        CREATE_DATE_TIME datetime DEFAULT getdate() NULL,
        UPDATE_DATE_TIME datetime NULL,
        VERSION int DEFAULT 1 NULL,
        CONSTRAINT PK_DGR_COMPOSER_FLOW PRIMARY KEY (FLOW_ID),
        CONSTRAINT u_DGR_COMPOSER_FLOW UNIQUE (MODULE_NAME,API_ID)
);
CREATE TABLE DGR_IMPORT_CLIENT_RELATED_TEMP (
        TEMP_ID bigint NOT NULL,
        IMPORT_CLIENT_RELATED varbinary(MAX) NOT NULL,
        ANALYZE_CLIENT_RELATED varbinary(MAX) NOT NULL,
        CREATE_DATE_TIME datetime DEFAULT getdate() NULL,
        CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
        UPDATE_DATE_TIME datetime NULL,
        UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        VERSION int DEFAULT 1 NULL,
        CONSTRAINT DGR_IMPORT_CLIENT_RELATED_TEMP_PK PRIMARY KEY (TEMP_ID)
);
CREATE TABLE DGR_NODE_LOST_CONTACT (
        LOST_CONTACT_ID bigint NOT NULL,
        NODE_NAME nvarchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        IP nvarchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        PORT int NOT NULL,
        LOST_TIME nvarchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        CREATE_TIMESTAMP bigint NOT NULL,
        CREATE_DATE_TIME datetime DEFAULT getdate() NULL,
        CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
        UPDATE_DATE_TIME datetime NULL,
        UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        VERSION int DEFAULT 1 NULL,
        CONSTRAINT PK_DGR_NODE_LOST_CONTACT PRIMARY KEY (LOST_CONTACT_ID)
);
CREATE TABLE DGR_OAUTH_APPROVALS (
        OAUTH_APPROVALS_ID bigint NOT NULL,
        USER_NAME nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        CLIENT_ID varchar(256) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        [SCOPE] varchar(256) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        STATUS varchar(10) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        EXPIRES_AT datetime NULL,
        LAST_MODIFIED_AT datetime NULL,
        CREATE_DATE_TIME datetime DEFAULT getdate() NULL,
        CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
        UPDATE_DATE_TIME datetime NULL,
        UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        VERSION int DEFAULT 1 NULL,
        CONSTRAINT PK_dgr_oauth_approvals PRIMARY KEY (OAUTH_APPROVALS_ID)
);
CREATE TABLE DGR_WEBSITE (
        DGR_WEBSITE_ID bigint NOT NULL,
        WEBSITE_NAME nvarchar(50) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        WEBSITE_STATUS varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'Y' NOT NULL,
        REMARK nvarchar(500) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        CREATE_DATE_TIME datetime DEFAULT getdate() NULL,
        CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
        UPDATE_DATE_TIME datetime NULL,
        UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        VERSION int DEFAULT 1 NULL,
        KEYWORD_SEARCH nvarchar(600) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        AUTH varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'N' NOT NULL,
        SQL_INJECTION varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'N' NOT NULL,
        TRAFFIC varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'N' NOT NULL,
        XSS varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'N' NOT NULL,
        XXE varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'N' NOT NULL,
        TPS int DEFAULT 0 NOT NULL,
        IGNORE_API nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        SHOW_LOG varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'N' NOT NULL,
        CONSTRAINT PK_DGR_WEBSITE PRIMARY KEY (DGR_WEBSITE_ID)
);
CREATE TABLE DGR_WEBSITE_DETAIL (
        DGR_WEBSITE_DETAIL_ID bigint NOT NULL,
        DGR_WEBSITE_ID bigint NOT NULL,
        PROBABILITY int NOT NULL,
        URL nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        CREATE_DATE_TIME datetime DEFAULT getdate() NULL,
        CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
        UPDATE_DATE_TIME datetime NULL,
        UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        VERSION int DEFAULT 1 NULL,
        KEYWORD_SEARCH nvarchar(1500) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        CONSTRAINT PK_DGR_WEBSITE_DETAIL PRIMARY KEY (DGR_WEBSITE_DETAIL_ID)
);
CREATE TABLE DGR_X_API_KEY (
        API_KEY_ID bigint NOT NULL,
        CLIENT_ID varchar(40) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        API_KEY_ALIAS nvarchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        EFFECTIVE_AT bigint NOT NULL,
        EXPIRED_AT bigint NOT NULL,
        API_KEY varchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        API_KEY_MASK varchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        API_KEY_EN varchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        CREATE_DATE_TIME datetime DEFAULT getdate() NULL,
        CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
        UPDATE_DATE_TIME datetime NULL,
        UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        VERSION int DEFAULT 1 NULL,
        CONSTRAINT PK__DGR_X_AP__909838E9740954BA PRIMARY KEY (API_KEY_ID)
);
CREATE TABLE DGR_X_API_KEY_MAP (
        API_KEY_MAP_ID bigint NOT NULL,
        REF_API_KEY_ID bigint NOT NULL,
        GROUP_ID nvarchar(10) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        CREATE_DATE_TIME datetime DEFAULT getdate() NULL,
        CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
        UPDATE_DATE_TIME datetime NULL,
        UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        VERSION int DEFAULT 1 NULL,
        CONSTRAINT PK__DGR_X_AP__341CA0EC66E54B20 PRIMARY KEY (API_KEY_MAP_ID)
);




ALTER TABLE OAUTH_CLIENT_DETAILS ADD web_server_redirect_uri1 nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE OAUTH_CLIENT_DETAILS ADD web_server_redirect_uri2 nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE OAUTH_CLIENT_DETAILS ADD web_server_redirect_uri3 nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE OAUTH_CLIENT_DETAILS ADD web_server_redirect_uri4 nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE OAUTH_CLIENT_DETAILS ADD web_server_redirect_uri5 nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;






ALTER TABLE TSMPN_SITE ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMPN_SITE ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


--修改 ALERT_SYS,ALERT_MSG,CREATE_USER,UPDATE_USER,ES_SEARCH_PAYLOAD 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_ALERT'
        set @columnName = 'ALERT_SYS'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_ALERT'
        set @columnName = 'ALERT_MSG'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_ALERT'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_ALERT'
        set @columnName = 'UPDATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_ALERT'
        set @columnName = 'ES_SEARCH_PAYLOAD'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go
-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_ALERT ALTER COLUMN ALERT_SYS nvarchar(20) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_ALERT ALTER COLUMN ALERT_MSG nvarchar(300) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_ALERT ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_ALERT ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_ALERT ALTER COLUMN ES_SEARCH_PAYLOAD nvarchar(1024) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;

ALTER TABLE [TSMP_ALERT] ADD  DEFAULT (NULL) FOR [ALERT_SYS]
ALTER TABLE [TSMP_ALERT] ADD  DEFAULT (NULL) FOR [ALERT_MSG]
ALTER TABLE [TSMP_ALERT] ADD  DEFAULT (NULL) FOR [CREATE_USER]
ALTER TABLE [TSMP_ALERT] ADD  DEFAULT (NULL) FOR [UPDATE_USER]
ALTER TABLE [TSMP_ALERT] ADD  DEFAULT (NULL) FOR [ES_SEARCH_PAYLOAD]
ALTER TABLE TSMP_ALERT_LOG ALTER COLUMN SENDER_TYPE nvarchar(20) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_ALERT_LOG ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改 ALERT_MSG,CREATE_USER 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_ALERT_LOG'
        set @columnName = 'ALERT_MSG'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_ALERT_LOG'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_ALERT_LOG ALTER COLUMN ALERT_MSG nvarchar(300) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_ALERT_LOG ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;

ALTER TABLE [TSMP_ALERT_LOG] ADD  DEFAULT ('') FOR [ALERT_MSG]
ALTER TABLE [TSMP_ALERT_LOG] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_API ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API ADD API_CACHE_FLAG char(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT '1' NOT NULL;
ALTER TABLE TSMP_API ADD MOCK_STATUS_CODE char(3) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API ADD MOCK_HEADERS nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API ADD MOCK_BODY nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API ADD success bigint DEFAULT 0 NOT NULL;
ALTER TABLE TSMP_API ADD fail bigint DEFAULT 0 NOT NULL;
ALTER TABLE TSMP_API ADD total bigint DEFAULT 0 NOT NULL;
ALTER TABLE TSMP_API ADD elapse bigint DEFAULT 0 NOT NULL;
ALTER TABLE TSMP_API ADD API_RELEASE_TIME datetime NULL;
ALTER TABLE TSMP_API ADD LABEL1 nvarchar(20) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API ADD LABEL2 nvarchar(20) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API ADD LABEL3 nvarchar(20) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API ADD LABEL4 nvarchar(20) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API ADD LABEL5 nvarchar(20) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API ADD FIXED_CACHE_TIME int DEFAULT 0 NOT NULL;

--修改 API_OWNER,SRC_URL 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_API'
        set @columnName = 'API_OWNER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_API'
        set @columnName = 'SRC_URL'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_API ALTER COLUMN API_OWNER nvarchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API ALTER COLUMN SRC_URL nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;

ALTER TABLE [TSMP_API] ADD  DEFAULT (NULL) FOR [API_OWNER]
ALTER TABLE [TSMP_API] ADD  DEFAULT (NULL) FOR [SRC_URL]

ALTER TABLE TSMP_API_EXT ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_API_EXT'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_API_EXT ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_API_EXT] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_API_IMP ALTER COLUMN FILENAME nvarchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_API_IMP ALTER COLUMN API_NAME nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ALTER COLUMN API_DESC nvarchar(300) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ALTER COLUMN API_OWNER nvarchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ALTER COLUMN SRC_URL nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ALTER COLUMN PATH_OF_JSON nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_API_IMP ALTER COLUMN METHOD_OF_JSON nvarchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_API_IMP ALTER COLUMN PARAMS_OF_JSON nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ALTER COLUMN HEADERS_OF_JSON nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ALTER COLUMN CONSUMES_OF_JSON nvarchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ALTER COLUMN PRODUCES_OF_JSON nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ALTER COLUMN FLOW nvarchar(MAX) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ALTER COLUMN MEMO nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD MOCK_STATUS_CODE char(3) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD MOCK_HEADERS varchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD MOCK_BODY nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD REDIRECT_BY_IP char(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'N' NULL;
ALTER TABLE TSMP_API_IMP ADD IP_FOR_REDIRECT1 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD IP_SRC_URL1 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD IP_FOR_REDIRECT2 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD IP_SRC_URL2 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD IP_FOR_REDIRECT3 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD IP_SRC_URL3 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD IP_FOR_REDIRECT4 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD IP_SRC_URL4 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD IP_FOR_REDIRECT5 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD IP_SRC_URL5 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD HEADER_MASK_KEY nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD HEADER_MASK_POLICY char(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT '0' NULL;
ALTER TABLE TSMP_API_IMP ADD HEADER_MASK_POLICY_NUM int NULL;
ALTER TABLE TSMP_API_IMP ADD HEADER_MASK_POLICY_SYMBOL varchar(10) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD BODY_MASK_KEYWORD nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD BODY_MASK_POLICY char(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT '0' NULL;
ALTER TABLE TSMP_API_IMP ADD BODY_MASK_POLICY_NUM int NULL;
ALTER TABLE TSMP_API_IMP ADD BODY_MASK_POLICY_SYMBOL varchar(10) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD LABEL1 nvarchar(20) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD LABEL2 nvarchar(20) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD LABEL3 nvarchar(20) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD LABEL4 nvarchar(20) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD LABEL5 nvarchar(20) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD API_CACHE_FLAG char(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT '1' NOT NULL;
ALTER TABLE TSMP_API_IMP ADD FIXED_CACHE_TIME int DEFAULT 0 NOT NULL;
ALTER TABLE TSMP_API_IMP ADD FAIL_DISCOVERY_POLICY varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT '0' NULL;
ALTER TABLE TSMP_API_IMP ADD FAIL_HANDLE_POLICY varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT '0' NULL;
ALTER TABLE TSMP_API_IMP ADD API_STATUS char(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT '2' NOT NULL;
ALTER TABLE TSMP_API_IMP ADD PUBLIC_FLAG char(1) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_IMP ADD API_RELEASE_TIME datetime NULL;

ALTER TABLE TSMP_API_REG ALTER COLUMN SRC_URL nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ALTER COLUMN METHOD_OF_JSON nvarchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_API_REG ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ADD REDIRECT_BY_IP char(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'N' NULL;
ALTER TABLE TSMP_API_REG ADD IP_FOR_REDIRECT1 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ADD IP_SRC_URL1 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ADD IP_FOR_REDIRECT2 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ADD IP_SRC_URL2 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ADD IP_FOR_REDIRECT3 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ADD IP_SRC_URL3 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ADD IP_FOR_REDIRECT4 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ADD IP_SRC_URL4 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ADD IP_FOR_REDIRECT5 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ADD IP_SRC_URL5 nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ADD HEADER_MASK_KEY nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ADD HEADER_MASK_POLICY char(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT '0' NULL;
ALTER TABLE TSMP_API_REG ADD HEADER_MASK_POLICY_NUM int NULL;
ALTER TABLE TSMP_API_REG ADD HEADER_MASK_POLICY_SYMBOL varchar(10) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ADD BODY_MASK_KEYWORD nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ADD BODY_MASK_POLICY char(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT '0' NULL;
ALTER TABLE TSMP_API_REG ADD BODY_MASK_POLICY_NUM int NULL;
ALTER TABLE TSMP_API_REG ADD BODY_MASK_POLICY_SYMBOL varchar(10) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_API_REG ADD FAIL_DISCOVERY_POLICY varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT '0' NULL;
ALTER TABLE TSMP_API_REG ADD FAIL_HANDLE_POLICY varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT '0' NULL;
ALTER TABLE TSMP_AUTH_CODE ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_AUTH_CODE'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_AUTH_CODE ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_AUTH_CODE] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_CLIENT_CERT ALTER COLUMN CERT_FILE_NAME nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_CLIENT_CERT ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_CLIENT_CERT'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_CLIENT_CERT ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_CLIENT_CERT] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_CLIENT_CERT2 ALTER COLUMN CERT_FILE_NAME nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_CLIENT_CERT2 ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_CLIENT_CERT2'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_CLIENT_CERT2 ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_CLIENT_CERT2] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]

ALTER TABLE TSMP_CLIENT_HOST ALTER COLUMN HOST_IP nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;


ALTER TABLE TSMP_DC ALTER COLUMN DC_MEMO nvarchar(300) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DC ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DC ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


ALTER TABLE TSMP_DP_ABOUT ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_ABOUT'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_ABOUT ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_ABOUT] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
	DECLARE @tableName NVARCHAR(200);
	DECLARE @columnName NVARCHAR(200);
	set @tableName = 'TSMP_DP_API_APP'
	set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_API_APP ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_API_APP] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_DP_API_AUTH2 ALTER COLUMN REVIEW_REMARK nvarchar(3000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_API_AUTH2 ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_API_AUTH2'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_API_AUTH2 ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_API_AUTH2] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
	DECLARE @tableName NVARCHAR(200);
	DECLARE @columnName NVARCHAR(200);
	set @tableName = 'TSMP_DP_API_THEME'
	set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_API_THEME ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_API_THEME] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
	DECLARE @tableName NVARCHAR(200);
	DECLARE @columnName NVARCHAR(200);
	set @tableName = 'TSMP_DP_API_VIEW_LOG'
	set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_API_VIEW_LOG ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_API_VIEW_LOG] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_DP_APP ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_APP'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_APP ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_APP] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_DP_APPT_JOB ALTER COLUMN IN_PARAMS nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_APPT_JOB ALTER COLUMN STACK_TRACE nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_APPT_JOB ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_APPT_JOB ALTER COLUMN IDENTIF_DATA nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_APPT_JOB'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_APPT_JOB ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_APPT_JOB] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_DP_APPT_RJOB ALTER COLUMN RJOB_NAME nvarchar(60) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_DP_APPT_RJOB ALTER COLUMN CRON_JSON nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_DP_APPT_RJOB ALTER COLUMN CRON_DESC nvarchar(300) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_APPT_RJOB ALTER COLUMN REMARK nvarchar(300) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_APPT_RJOB ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_APPT_RJOB ALTER COLUMN KEYWORD_SEARCH nvarchar(396) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_APPT_RJOB'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_APPT_RJOB ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_APPT_RJOB] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_DP_APPT_RJOB_D ALTER COLUMN KEYWORD_SEARCH nvarchar(186) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_APPT_RJOB_D ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_APPT_RJOB_D ALTER COLUMN IN_PARAMS nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_APPT_RJOB_D ALTER COLUMN IDENTIF_DATA nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_APPT_RJOB_D'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_APPT_RJOB_D ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_APPT_RJOB_D] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_DP_APP_CATEGORY ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_APP_CATEGORY'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_APP_CATEGORY ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_APP_CATEGORY] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_DP_CALLAPI ALTER COLUMN REQ_URL nvarchar(500) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_DP_CALLAPI ALTER COLUMN REQ_MSG nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_CALLAPI ALTER COLUMN RESP_MSG nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_CALLAPI ALTER COLUMN TOKEN_URL nvarchar(500) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_CALLAPI ALTER COLUMN SIGN_CODE_URL nvarchar(500) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_CALLAPI'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_CALLAPI ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_CALLAPI] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_DP_CHK_LAYER ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_CHK_LAYER'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_CHK_LAYER ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_CHK_LAYER] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_DP_CHK_LOG ALTER COLUMN REQ_COMMENT nvarchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_CHK_LOG'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_CHK_LOG ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_CHK_LOG] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_DP_CLIENTEXT ALTER COLUMN REVIEW_REMARK nvarchar(3000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_CLIENTEXT ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_CLIENTEXT'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_CLIENTEXT ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_CLIENTEXT] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_DENIED_MODULE'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_DENIED_MODULE ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_DENIED_MODULE] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_DP_FAQ_ANSWER ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_FAQ_ANSWER'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_FAQ_ANSWER ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_FAQ_ANSWER] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_DP_FAQ_QUESTION ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_FAQ_QUESTION'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_FAQ_QUESTION ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_FAQ_QUESTION] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_DP_FILE ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_FILE'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_FILE ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_FILE] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_DP_ITEMS ALTER COLUMN ITEM_NAME nvarchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_DP_ITEMS ALTER COLUMN SUBITEM_NAME nvarchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_DP_ITEMS ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_ITEMS'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_ITEMS ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_ITEMS] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_DP_MAIL_LOG ALTER COLUMN TEMPLATE_TXT nvarchar(3800) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_DP_MAIL_LOG ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_MAIL_LOG ADD stack_trace nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_MAIL_LOG'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_MAIL_LOG ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_MAIL_LOG] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]


ALTER TABLE TSMP_DP_MAIL_TPLT ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_MAIL_TPLT ALTER COLUMN TEMPLATE_TXT nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_DP_MAIL_TPLT ALTER COLUMN REMARK nvarchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_MAIL_TPLT'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_MAIL_TPLT ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_MAIL_TPLT] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]


ALTER TABLE TSMP_DP_NEWS ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_NEWS ALTER COLUMN KEYWORD_SEARCH nvarchar(2148) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_NEWS'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_NEWS'
        set @columnName = 'NEW_TITLE'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_NEWS ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_NEWS ALTER COLUMN NEW_TITLE nvarchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE [TSMP_DP_NEWS] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE [TSMP_DP_NEWS] ADD  DEFAULT ('_') FOR [NEW_TITLE]




ALTER TABLE TSMP_DP_REQ_ORDERD1 ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_REQ_ORDERD1'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_REQ_ORDERD1 ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_REQ_ORDERD1] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]


ALTER TABLE TSMP_DP_REQ_ORDERD2 ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_REQ_ORDERD2'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_REQ_ORDERD2 ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_REQ_ORDERD2] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]


ALTER TABLE TSMP_DP_REQ_ORDERD2D ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_REQ_ORDERD2D'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_REQ_ORDERD2D ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_REQ_ORDERD2D] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]


ALTER TABLE TSMP_DP_REQ_ORDERD3 ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_REQ_ORDERD3'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_REQ_ORDERD3 ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_REQ_ORDERD3] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]


ALTER TABLE TSMP_DP_REQ_ORDERD5 ALTER COLUMN OPEN_APIKEY_ALIAS nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_DP_REQ_ORDERD5 ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_REQ_ORDERD5'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_REQ_ORDERD5 ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_REQ_ORDERD5] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]


ALTER TABLE TSMP_DP_REQ_ORDERD5D ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_REQ_ORDERD5D'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_REQ_ORDERD5D ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_REQ_ORDERD5D] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]


ALTER TABLE TSMP_DP_REQ_ORDERM ALTER COLUMN REQ_ORDER_NO varchar(30) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_DP_REQ_ORDERM ALTER COLUMN REQ_USER_ID varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_REQ_ORDERM ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_REQ_ORDERM'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_REQ_ORDERM ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_REQ_ORDERM] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]


ALTER TABLE TSMP_DP_REQ_ORDERS ALTER COLUMN REQ_COMMENT nvarchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_REQ_ORDERS ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_REQ_ORDERS'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_REQ_ORDERS ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_REQ_ORDERS] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]


ALTER TABLE TSMP_DP_SITE_MAP ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_SITE_MAP'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_SITE_MAP ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_SITE_MAP] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]


ALTER TABLE TSMP_DP_THEME_CATEGORY ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_DP_THEME_CATEGORY ADD DATA_SORT int NULL;
--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_DP_THEME_CATEGORY'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_DP_THEME_CATEGORY ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_DP_THEME_CATEGORY] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]


--修改欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_EVENTS'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_EVENTS ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_EVENTS] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
-- ALTER TABLE TSMP_FUNC ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_FUNC ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_FUNC ADD FUNC_TYPE char(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT '1' NULL;
ALTER TABLE TSMP_FUNC_EDITION ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_GROUP ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_GROUP ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改 GROUP_ALIAS,GROUP_DESC 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_GROUP'
        set @columnName = 'GROUP_ALIAS'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_GROUP'
        set @columnName = 'GROUP_DESC'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_GROUP ALTER COLUMN GROUP_ALIAS nvarchar(150) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_GROUP ALTER COLUMN GROUP_DESC nvarchar(1500) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_GROUP] ADD  DEFAULT (NULL) FOR [GROUP_ALIAS]
ALTER TABLE [TSMP_GROUP] ADD  DEFAULT (NULL) FOR [GROUP_DESC]

ALTER TABLE TSMP_GROUP_AUTHORITIES ALTER COLUMN GROUP_AUTHORITIE_DESC nvarchar(60) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;






ALTER TABLE TSMP_OPEN_APIKEY ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_OPEN_APIKEY ALTER COLUMN OPEN_APIKEY_ALIAS nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
--修改 CREATE_USER 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_OPEN_APIKEY'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_OPEN_APIKEY ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_OPEN_APIKEY] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_OPEN_APIKEY_MAP ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改 CREATE_USER 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_OPEN_APIKEY_MAP'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_OPEN_APIKEY_MAP ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_OPEN_APIKEY_MAP] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE [TSMP_ORGANIZATION] DROP  CONSTRAINT [TSMP_ORGANIZATION_UQ]

ALTER TABLE TSMP_ORGANIZATION ALTER COLUMN ORG_NAME nvarchar(30) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_ORGANIZATION ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_ORGANIZATION ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;

ALTER TABLE [TSMP_ORGANIZATION] ADD  CONSTRAINT [TSMP_ORGANIZATION_UQ] UNIQUE NONCLUSTERED 
(
        [ORG_NAME] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO

ALTER TABLE TSMP_REG_HOST ALTER COLUMN MEMO nvarchar(300) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_REG_HOST ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_REG_HOST ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_REG_MODULE ALTER COLUMN UPLOAD_USER nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_REG_MODULE ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改 CREATE_USER 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_REG_MODULE'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_REG_MODULE ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_REG_MODULE] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]
ALTER TABLE TSMP_REPORT_DATA ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改 CREATE_USER 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_REPORT_DATA'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_REPORT_DATA ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_REPORT_DATA] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]

ALTER TABLE TSMP_REQ_LOG ALTER COLUMN NODE_ALIAS nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_REQ_LOG ALTER COLUMN URL nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_REQ_LOG ALTER COLUMN TUSER nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_RES_LOG ALTER COLUMN ERR_MSG nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_ROLE ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;




ALTER TABLE TSMP_ROLE_TXID_MAP ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_ROLE_TXID_MAP ALTER COLUMN KEYWORD_SEARCH nvarchar(20) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改 CREATE_USER 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_ROLE_TXID_MAP'
        set @columnName = 'CREATE_USER'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_ROLE_TXID_MAP ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_ROLE_TXID_MAP] ADD  DEFAULT ('SYSTEM') FOR [CREATE_USER]

ALTER TABLE TSMP_SECURITY_LEVEL ALTER COLUMN SECURITY_LEVEL_DESC nvarchar(60) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


--修改 MEMO欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_SETTING'
        set @columnName = 'MEMO'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go
ALTER TABLE TSMP_SETTING ALTER COLUMN MEMO nvarchar(512) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_TOKEN_HISTORY ALTER COLUMN USER_NAME nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_TOKEN_HISTORY ADD RFT_REVOKED_AT datetime NULL;
ALTER TABLE TSMP_TOKEN_HISTORY ADD RFT_REVOKED_STATUS varchar(10) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_TOKEN_HISTORY ADD TOKEN_QUOTA int NULL;
ALTER TABLE TSMP_TOKEN_HISTORY ADD TOKEN_USED int NULL;
ALTER TABLE TSMP_TOKEN_HISTORY ADD RFT_QUOTA int NULL;
ALTER TABLE TSMP_TOKEN_HISTORY ADD RFT_USED int NULL;
ALTER TABLE TSMP_TOKEN_HISTORY ADD IDP_TYPE varchar(50) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_TOKEN_HISTORY ADD ID_TOKEN_JWTSTR nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_TOKEN_HISTORY ADD REFRESH_TOKEN_JWTSTR nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_TOKEN_HISTORY ADD API_RESP nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;





ALTER TABLE TSMP_USER ALTER COLUMN USER_NAME nvarchar(50) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_USER ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_USER ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
--修改 CREATE_USER 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);
        DECLARE @tableName NVARCHAR(200);
        DECLARE @columnName NVARCHAR(200);
        set @tableName = 'TSMP_USER'
        set @columnName = 'USER_ALIAS'

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@tableName)
    AND col_name(parent_object_id, parent_column_id) = @columnName;

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE '+ @tableName +' DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位及重新設置 DEFAULT 約束
ALTER TABLE TSMP_USER ALTER COLUMN USER_ALIAS nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE [TSMP_USER] ADD  DEFAULT (NULL) FOR [USER_ALIAS]
ALTER TABLE TSMP_VGROUP ALTER COLUMN VGROUP_DESC nvarchar(1500) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
ALTER TABLE TSMP_VGROUP ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;
ALTER TABLE TSMP_VGROUP ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;



CREATE TABLE cus_setting (
        cus_setting_id bigint NOT NULL,
        setting_no varchar(20) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        setting_name varchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        subsetting_no varchar(20) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        subsetting_name varchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        sort_by int DEFAULT 0 NOT NULL,
        is_default varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        param1 varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        param2 varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        param3 varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        param4 varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        param5 varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        create_date_time datetime DEFAULT getdate() NULL,
        create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
        update_date_time datetime NULL,
        update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        version int DEFAULT 1 NULL,
        keyword_search nvarchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        CONSTRAINT PK__cus_sett__6EB471A879BAE8F1 PRIMARY KEY (setting_no,subsetting_no)
);
CREATE TABLE dgr_ac_idp_auth_code (
	ac_idp_auth_code_id bigint NOT NULL,
	auth_code varchar(50) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	expire_date_time bigint NOT NULL,
	status varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT '0' NOT NULL,
	idp_type varchar(50) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	user_name nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	create_date_time datetime DEFAULT getdate() NULL,
	create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
	update_date_time datetime NULL,
	update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	version int DEFAULT 1 NULL,
	CONSTRAINT PK__dgr_ac_i__2549B4ABEEEABEA3 PRIMARY KEY (ac_idp_auth_code_id),
	CONSTRAINT UQ__dgr_ac_i__D8E777F772AD4642 UNIQUE (auth_code)
);
CREATE TABLE dgr_ac_idp_info (
	ac_idp_info_id bigint NOT NULL,
	idp_type varchar(50) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	client_id nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	client_mima varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	client_name nvarchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	client_status varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'Y' NOT NULL,
	well_known_url nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	callback_url nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	auth_url nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	access_token_url nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	[scope] varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	create_date_time datetime DEFAULT getdate() NULL,
	create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
	update_date_time datetime NULL,
	update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	version int DEFAULT 1 NULL,
	CONSTRAINT PK__dgr_ac_i__88115A28321A0B8A PRIMARY KEY (ac_idp_info_id),
	CONSTRAINT UQ__dgr_ac_i__43220BDBD209C805 UNIQUE (idp_type,client_id)
);
CREATE TABLE dgr_ac_idp_info_api (
	ac_idp_info_api_id bigint NOT NULL,
	status varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'Y' NOT NULL,
	approval_result_mail varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	api_method varchar(10) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	api_url nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	req_header nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	req_body_type varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'N' NOT NULL,
	req_body nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	suc_by_type varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'H' NOT NULL,
	suc_by_field varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	suc_by_value nvarchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	idt_name varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	idt_email varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	idt_picture varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	icon_file varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	page_title nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	create_date_time datetime NULL,
	create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
	update_date_time datetime NULL,
	update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	version int DEFAULT '1' NULL,
	keyword_search nvarchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	CONSTRAINT PK_ PRIMARY KEY (ac_idp_info_api_id)
);
CREATE TABLE dgr_ac_idp_info_ldap (
	ac_idp_info_ldap_id bigint NOT NULL,
	ldap_url nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	ldap_dn varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	ldap_timeout int NOT NULL,
	ldap_status varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'Y' NOT NULL,
	approval_result_mail varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	icon_file varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	create_date_time datetime DEFAULT getdate() NULL,
	create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
	update_date_time datetime NULL,
	update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	version int DEFAULT 1 NULL,
	page_title nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	ldap_base_dn varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	CONSTRAINT PK__dgr_ac_i__77F66C03A5927F04 PRIMARY KEY (ac_idp_info_ldap_id)
);
CREATE TABLE dgr_ac_idp_info_mldap_d (
	ac_idp_info_mldap_d_id bigint NOT NULL,
	ref_ac_idp_info_mldap_m_id bigint NOT NULL,
	order_no int NOT NULL,
	ldap_url nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	ldap_dn varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	ldap_base_dn varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	create_date_time datetime DEFAULT getdate() NULL,
	create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
	update_date_time datetime NULL,
	update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	version int DEFAULT 1 NULL,
	CONSTRAINT PK__dgr_ac_i__1599050C415BA42A PRIMARY KEY (ac_idp_info_mldap_d_id)
);
CREATE TABLE dgr_ac_idp_info_mldap_m (
	ac_idp_info_mldap_m_id bigint NOT NULL,
	ldap_timeout int NOT NULL,
	status varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'Y' NOT NULL,
	policy varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'S' NOT NULL,
	approval_result_mail varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	icon_file varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	page_title nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	create_date_time datetime DEFAULT getdate() NULL,
	create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
	update_date_time datetime NULL,
	update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	version int DEFAULT 1 NULL,
	CONSTRAINT PK__dgr_ac_i__3C3416BD04529362 PRIMARY KEY (ac_idp_info_mldap_m_id)
);
CREATE TABLE dgr_ac_idp_user (
	ac_idp_user_id bigint NOT NULL,
	user_name nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	user_alias nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	user_status varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT '1' NOT NULL,
	user_email varchar(500) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	org_id varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	idp_type varchar(50) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	code1 bigint NULL,
	code2 bigint NULL,
	id_token_jwtstr nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	access_token_jwtstr nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	refresh_token_jwtstr nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	create_date_time datetime DEFAULT getdate() NULL,
	create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
	update_date_time datetime NULL,
	update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	version int DEFAULT 1 NULL,
	CONSTRAINT PK__dgr_ac_i__D47008EB24518AA1 PRIMARY KEY (ac_idp_user_id),
	CONSTRAINT UQ__dgr_ac_i__ED1F72DDF1842D17 UNIQUE (user_name,idp_type)
);
CREATE TABLE dgr_dashboard_es_log (
	id varchar(63) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	rtime datetime NOT NULL,
	module_name varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	orgid varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	txid varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	cid varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	exe_status char(1) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	elapse int NOT NULL,
	http_status int NOT NULL,
	rtime_year_month varchar(8) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	CONSTRAINT pk_dgr_dashboard_es_log PRIMARY KEY (id)
);
CREATE TABLE dgr_dashboard_last_data (
	dashboard_id bigint NOT NULL,
	dashboard_type int NOT NULL,
	time_type int NOT NULL,
	str1 nvarchar(500) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	str2 nvarchar(500) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	str3 nvarchar(500) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	num1 bigint NULL,
	num2 bigint NULL,
	num3 bigint NULL,
	num4 bigint NULL,
	sort_num int DEFAULT 1 NULL,
	CONSTRAINT pk_dgr_dashboard_last_data PRIMARY KEY (dashboard_id)
);
CREATE TABLE dgr_gtw_idp_auth_code (
	gtw_idp_auth_code_id bigint NOT NULL,
	auth_code varchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	phase varchar(10) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	status varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'A' NOT NULL,
	expire_date_time bigint NOT NULL,
	idp_type varchar(50) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	client_id varchar(40) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	user_name nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	user_alias nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	user_email varchar(500) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	user_picture varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	id_token_jwtstr nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	access_token_jwtstr nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	refresh_token_jwtstr nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	create_date_time datetime DEFAULT getdate() NULL,
	create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
	update_date_time datetime NULL,
	update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	version int DEFAULT 1 NULL,
	API_RESP nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	state varchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	CONSTRAINT PK__dgr_gtw___380C7321EF864D11 PRIMARY KEY (gtw_idp_auth_code_id),
	CONSTRAINT UQ__dgr_gtw___D8E777F7B580B71A UNIQUE (auth_code)
);
CREATE TABLE dgr_gtw_idp_auth_d (
	gtw_idp_auth_d_id bigint NOT NULL,
	ref_gtw_idp_auth_m_id bigint NOT NULL,
	[scope] varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	create_date_time datetime DEFAULT getdate() NULL,
	create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
	update_date_time datetime NULL,
	update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	version int DEFAULT 1 NULL,
	CONSTRAINT PK__dgr_gtw___1C98292A56B852B1 PRIMARY KEY (gtw_idp_auth_d_id)
);
CREATE TABLE dgr_gtw_idp_auth_m (
	gtw_idp_auth_m_id bigint NOT NULL,
	state varchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	idp_type varchar(50) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	client_id varchar(40) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	auth_code varchar(50) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	create_date_time datetime DEFAULT getdate() NULL,
	create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
	update_date_time datetime NULL,
	update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	version int DEFAULT 1 NULL,
	redirect_uri nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	code_challenge nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	code_challenge_method varchar(10) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	CONSTRAINT PK__dgr_gtw___CCDF02EDD18049EE PRIMARY KEY (gtw_idp_auth_m_id),
	CONSTRAINT UQ__dgr_gtw___A9360BC35CC4ACB1 UNIQUE (state)
);
CREATE TABLE dgr_gtw_idp_info_a (
	gtw_idp_info_a_id bigint NOT NULL,
	client_id varchar(40) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	status varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'Y' NOT NULL,
	remark nvarchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	api_method varchar(10) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	api_url nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	req_header nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	req_body_type varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'N' NOT NULL,
	req_body nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	suc_by_type varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'H' NOT NULL,
	suc_by_field varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	suc_by_value nvarchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	idt_name varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	idt_email varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	idt_picture varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	icon_file varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	page_title nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	create_date_time datetime DEFAULT getdate() NULL,
	create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
	update_date_time datetime NULL,
	update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	version int DEFAULT 1 NULL,
	CONSTRAINT PK__dgr_gtw___C30F48CA59FC8FA0 PRIMARY KEY (gtw_idp_info_a_id)
);
CREATE TABLE dgr_gtw_idp_info_jdbc (
	GTW_IDP_INFO_JDBC_ID bigint NOT NULL,
	CLIENT_ID varchar(40) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	STATUS varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'Y' NOT NULL,
	REMARK nvarchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	CONNECTION_NAME nvarchar(50) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	SQL_PTMT nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	SQL_PARAMS nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	USER_MIMA_ALG varchar(40) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	USER_MIMA_COL_NAME varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	IDT_SUB varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	IDT_NAME varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	IDT_EMAIL varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	IDT_PICTURE varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	ICON_FILE varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	PAGE_TITLE nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	CREATE_DATE_TIME datetime DEFAULT getdate() NULL,
	CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
	UPDATE_DATE_TIME datetime NULL,
	UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	VERSION int DEFAULT 1 NULL,
	CONSTRAINT PK__dgr_gtw___8BAF428EBF5AEF1D PRIMARY KEY (GTW_IDP_INFO_JDBC_ID)
);
CREATE TABLE dgr_gtw_idp_info_l (
	gtw_idp_info_l_id bigint NOT NULL,
	client_id varchar(40) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	status varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'Y' NOT NULL,
	remark nvarchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	ldap_url nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	ldap_dn varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	ldap_timeout int NOT NULL,
	icon_file varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	page_title nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	create_date_time datetime DEFAULT getdate() NULL,
	create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
	update_date_time datetime NULL,
	update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	version int DEFAULT 1 NULL,
	ldap_base_dn varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	CONSTRAINT PK__dgr_gtw___6AD6BF7F27C3E24B PRIMARY KEY (gtw_idp_info_l_id)
);
CREATE TABLE dgr_gtw_idp_info_o (
        gtw_idp_info_o_id bigint NOT NULL,
        client_id varchar(40) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        idp_type varchar(50) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        status varchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'Y' NOT NULL,
        remark nvarchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        idp_client_id nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        idp_client_mima varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        idp_client_name nvarchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        well_known_url nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        callback_url nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        auth_url nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        access_token_url nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        [scope] varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        create_date_time datetime DEFAULT getdate() NULL,
        create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
        update_date_time datetime NULL,
        update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        version int DEFAULT 1 NULL,
        CONSTRAINT PK__dgr_gtw___54C038B0F1C7E454 PRIMARY KEY (gtw_idp_info_o_id)
);
CREATE TABLE dgr_rdb_connection (
	connection_name nvarchar(50) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	jdbc_url varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	user_name varchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	mima varchar(500) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
	max_pool_size int DEFAULT 10 NOT NULL,
	connection_timeout int DEFAULT 30000 NOT NULL,
	idle_timeout int DEFAULT 600000 NOT NULL,
	max_lifetime int DEFAULT 1800000 NOT NULL,
	data_source_property varchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	create_date_time datetime DEFAULT getdate() NULL,
	create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
	update_date_time datetime NULL,
	update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
	version int DEFAULT 1 NULL,
	CONSTRAINT pk_dgr_rdb_connection PRIMARY KEY (connection_name)
);
CREATE TABLE dgr_web_socket_mapping (
        ws_mapping_id bigint NOT NULL,
        site_name nvarchar(50) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        target_ws nvarchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        memo nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        create_date_time datetime DEFAULT getdate() NULL,
        create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS DEFAULT 'SYSTEM' NULL,
        update_date_time datetime NULL,
        update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        version int DEFAULT 1 NULL,
        keyword_search nvarchar(250) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        CONSTRAINT PK_DGR_WEB_SOCKET_MAPPING PRIMARY KEY (ws_mapping_id),
        CONSTRAINT UK_DGR_WEB_SOCKET_MAPPING UNIQUE (site_name)
);
-- 1. 修改 user_name 欄位型別
ALTER TABLE ldap_auth_result
ALTER COLUMN user_name nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;


-- 2. 修改 create_user 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id('ldap_auth_result')
    AND col_name(parent_object_id, parent_column_id) = 'create_user';

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE ldap_auth_result DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位型別
ALTER TABLE ldap_auth_result
ALTER COLUMN create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 重新設置 DEFAULT 約束
ALTER TABLE ldap_auth_result
ADD CONSTRAINT DF_ldap_auth_result_create_user DEFAULT 'LDAP_SYSTEM' FOR create_user;


-- 3. 修改 update_user 欄位型別
ALTER TABLE ldap_auth_result
ALTER COLUMN update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 1. 修改 user_name 欄位型別
ALTER TABLE sso_auth_result
ALTER COLUMN user_name nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 2. 修改 create_user 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id('sso_auth_result')
    AND col_name(parent_object_id, parent_column_id) = 'create_user';

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE sso_auth_result DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位型別
ALTER TABLE sso_auth_result
ALTER COLUMN create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 重新設置 DEFAULT 約束
ALTER TABLE sso_auth_result
ADD CONSTRAINT DF_sso_auth_result_create_user DEFAULT 'SSO SYSTEM' FOR create_user;


-- 3. 修改 update_user 欄位型別
ALTER TABLE sso_auth_result
ALTER COLUMN update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 1. 修改 CLIENT_STATUS 欄位型別
ALTER TABLE TSMP_CLIENT
ALTER COLUMN CLIENT_STATUS nchar(1) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;


-- 2. 修改 CREATE_TIME 和 UPDATE_TIME 欄位型別
--ALTER TABLE TSMP_CLIENT ALTER COLUMN CREATE_TIME datetime2(0) NOT NULL;


--ALTER TABLE TSMP_CLIENT ALTER COLUMN UPDATE_TIME datetime2(0) NULL;


-- 3. 修改 CREATE_USER 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id('TSMP_CLIENT')
    AND col_name(parent_object_id, parent_column_id) = 'CREATE_USER';

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE TSMP_CLIENT DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位型別
ALTER TABLE TSMP_CLIENT
ALTER COLUMN CREATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 重新設置 DEFAULT 約束
ALTER TABLE TSMP_CLIENT
ADD CONSTRAINT DF_TSMP_CLIENT_CREATE_USER DEFAULT 'SSO SYSTEM' FOR CREATE_USER;


-- 4. 修改 UPDATE_USER 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @updateUserDefaultConstraint NVARCHAR(200);

    SELECT @updateUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id('TSMP_CLIENT')
    AND col_name(parent_object_id, parent_column_id) = 'UPDATE_USER';

    -- 如果找到約束名稱，則刪除它
    IF @updateUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE TSMP_CLIENT DROP CONSTRAINT ' + @updateUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位型別
ALTER TABLE TSMP_CLIENT
ALTER COLUMN UPDATE_USER nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 重新設置 DEFAULT 約束
ALTER TABLE TSMP_CLIENT
ADD CONSTRAINT DF_TSMP_CLIENT_UPDATE_USER DEFAULT NULL FOR UPDATE_USER;


-- 5. 修改 CLIENT_ALIAS 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @clientAliasDefaultConstraint NVARCHAR(200);

    SELECT @clientAliasDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id('TSMP_CLIENT')
    AND col_name(parent_object_id, parent_column_id) = 'CLIENT_ALIAS';

    -- 如果找到約束名稱，則刪除它
    IF @clientAliasDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE TSMP_CLIENT DROP CONSTRAINT ' + @clientAliasDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位型別
ALTER TABLE TSMP_CLIENT
ALTER COLUMN CLIENT_ALIAS nvarchar(150) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 重新設置 DEFAULT 約束
ALTER TABLE TSMP_CLIENT
ADD CONSTRAINT DF_TSMP_CLIENT_CLIENT_ALIAS DEFAULT NULL FOR CLIENT_ALIAS;


-- 6. 新增 START_DATE, END_DATE, START_TIME_PER_DAY, END_TIME_PER_DAY, TIME_ZONE, dp_client_entry 欄位
ALTER TABLE TSMP_CLIENT
ADD START_DATE bigint NULL,
    END_DATE bigint NULL,
    START_TIME_PER_DAY bigint NULL,
    END_TIME_PER_DAY bigint NULL,
    TIME_ZONE varchar(200) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
    dp_client_entry nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 1. 修改 template_txt 欄位型別
ALTER TABLE tsmp_dp_mail_tplten
ALTER COLUMN template_txt nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;


-- 2. 修改 remark 欄位型別
ALTER TABLE tsmp_dp_mail_tplten
ALTER COLUMN remark nvarchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 3. 修改 create_user 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id('tsmp_dp_mail_tplten')
    AND col_name(parent_object_id, parent_column_id) = 'create_user';

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE tsmp_dp_mail_tplten DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位型別
ALTER TABLE tsmp_dp_mail_tplten
ALTER COLUMN create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 重新設置 DEFAULT 約束
ALTER TABLE tsmp_dp_mail_tplten
ADD CONSTRAINT DF_tsmp_dp_mail_tplten_create_user DEFAULT 'SYSTEM' FOR create_user;


-- 4. 修改 update_user 欄位型別
ALTER TABLE tsmp_dp_mail_tplten
ALTER COLUMN update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 1. 修改 template_txt 欄位型別
ALTER TABLE tsmp_dp_mail_tplttw
ALTER COLUMN template_txt nvarchar(2000) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;


-- 2. 修改 remark 欄位型別
ALTER TABLE tsmp_dp_mail_tplttw
ALTER COLUMN remark nvarchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 3. 修改 create_user 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id('tsmp_dp_mail_tplttw')
    AND col_name(parent_object_id, parent_column_id) = 'create_user';

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE tsmp_dp_mail_tplttw DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位型別
ALTER TABLE tsmp_dp_mail_tplttw
ALTER COLUMN create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 重新設置 DEFAULT 約束
ALTER TABLE tsmp_dp_mail_tplttw
ADD CONSTRAINT DF_tsmp_dp_mail_tplttw_create_user DEFAULT 'SYSTEM' FOR create_user;


-- 4. 修改 update_user 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @updateUserDefaultConstraint NVARCHAR(200);

    SELECT @updateUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id('tsmp_dp_mail_tplttw')
    AND col_name(parent_object_id, parent_column_id) = 'update_user';

    -- 如果找到約束名稱，則刪除它
    IF @updateUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE tsmp_dp_mail_tplttw DROP CONSTRAINT ' + @updateUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位型別
ALTER TABLE tsmp_dp_mail_tplttw
ALTER COLUMN update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 重新設置 DEFAULT 約束
ALTER TABLE tsmp_dp_mail_tplttw
ADD CONSTRAINT DF_tsmp_dp_mail_tplttw_update_user DEFAULT NULL FOR update_user;


-- 修改 notice_src 欄位型別
ALTER TABLE tsmp_notice_log
ALTER COLUMN notice_src nvarchar(100) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL;

CREATE TABLE tsmp_req_res_log_history (
        id varchar(63) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        atype varchar(3) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        module_name varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        module_version varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        node_alias nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        node_id varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        url nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        cip varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        orgid varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        txid varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        entry varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        cid varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        tuser nvarchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        jti varchar(255) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        exe_status char(1) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        elapse int NOT NULL,
        rcode varchar(63) COLLATE Chinese_Taiwan_Stroke_CI_AS NOT NULL,
        http_status int NOT NULL,
        err_msg nvarchar(4000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        rtime datetime NULL,
        rtime_year_month varchar(8) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL,
        CONSTRAINT PK__tsmp_req__3213E83FFA000168 PRIMARY KEY (id)
);
-- 1. 修改 user_name 欄位型別
ALTER TABLE tsmp_sso_user_secret
ALTER COLUMN user_name nvarchar(400) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 2. 修改 create_user 欄位型別及 DEFAULT 約束
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    DECLARE @createUserDefaultConstraint NVARCHAR(200);

    SELECT @createUserDefaultConstraint = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id('tsmp_sso_user_secret')
    AND col_name(parent_object_id, parent_column_id) = 'create_user';

    -- 如果找到約束名稱，則刪除它
    IF @createUserDefaultConstraint IS NOT NULL
    BEGIN
        SET @sql = N'ALTER TABLE tsmp_sso_user_secret DROP CONSTRAINT ' + @createUserDefaultConstraint;
        EXEC sp_executesql @sql;
    END
END
go

-- 修改欄位型別
ALTER TABLE tsmp_sso_user_secret
ALTER COLUMN create_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;


-- 重新設置 DEFAULT 約束
ALTER TABLE tsmp_sso_user_secret
ADD CONSTRAINT DF_tsmp_sso_user_secret_create_user DEFAULT 'SSO SYSTEM' FOR create_user;

-- 修改update_user欄位型別
ALTER TABLE tsmp_sso_user_secret
ALTER COLUMN update_user nvarchar(1000) COLLATE Chinese_Taiwan_Stroke_CI_AS NULL;
