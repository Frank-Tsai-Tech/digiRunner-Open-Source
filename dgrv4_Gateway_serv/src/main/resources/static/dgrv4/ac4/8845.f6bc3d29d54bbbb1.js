"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[8845],{18845:(T,g,r)=>{r.r(g),r.d(g,{Np0402Module:()=>J});var a=r(69808),l=r(78555),v=r(31890),h=r(93075),f=r(86347),P=r(99291),I=r(15861),o=r(14525),e=r(87587),n=r(56435),p=r(45682),m=r(92340),R=r(57553),M=r(96614);let C=(()=>{class i{constructor(s){this.api=s,this.api.baseUrl=m.N.dpPath}get basePath(){return m.N.isv4?"dgrv4/11":"tsmpdpaa/11"}saveLayer(s){let t={ReqHeader:this.api.getReqHeader(R.Nx.saveLayer),ReqBody:s};return this.api.npPost(`${this.basePath}/DPB0063`,t)}queryAllLayer_ignore1298(){let s={ReqHeader:this.api.getReqHeader(R.Nx.queryAllLayer),ReqBody:{}};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0064`,s)}queryAllLayer(){let s={ReqHeader:this.api.getReqHeader(R.Nx.queryAllLayer),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0064`,s)}}return i.\u0275fac=function(s){return new(s||i)(e.LFG(M.K))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var b=r(59783),x=r(1955),Z=r(63710),G=r(86526),$=r(17773),U=r(51062);const q=function(){return{width:"100%"}},B=function(){return{maxWidth:"50vw"}};function K(i,y){if(1&i&&(e.TgZ(0,"tr")(1,"td")(2,"label",11),e._uU(3),e.qZA()(),e.TgZ(4,"td"),e._UZ(5,"p-multiSelect",12),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"p-multiSelect",12),e.ALo(9,"translate"),e.qZA()()),2&i){const s=y.$implicit,t=e.oxw(2);e.xp6(3),e.Oqu(s.label),e.xp6(2),e.Akn(e.DdM(21,q)),e.s9C("defaultLabel",e.lcZ(6,17,"plz_chs")),e.MGl("formControlName","",s.value,"_1"),e.Q6J("options",t.roles)("filter",!0)("baseZIndex",1e3)("panelStyle",e.DdM(22,B)),e.xp6(3),e.Akn(e.DdM(23,q)),e.s9C("defaultLabel",e.lcZ(9,19,"plz_chs")),e.MGl("formControlName","",s.value,"_2"),e.Q6J("options",t.roles)("filter",!0)("baseZIndex",1e3)("panelStyle",e.DdM(24,B))}}function S(i,y){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,K,10,25,"tr",10),e.qZA()),2&i){const s=e.oxw();e.xp6(1),e.Q6J("ngForOf",s.layers)}}const Y=function(){return{marginTop:"60px"}},j=[{path:"",component:(()=>{class i extends o.H{constructor(s,t,_,A,O,E,L){super(s,t),this.fb=_,this.tool=A,this.layer=O,this.message=E,this.role=L,this.roles=[],this.dataMap={API_APPLICATION:{1:[],2:[]},API_ON_OFF:{1:[],2:[]},CLIENT_REG:{1:[],2:[]},OPEN_API_KEY:{1:[],2:[]}},this.layers=new Array}ngOnInit(){this.role.queryRoleRoleList({paging:"N"}).subscribe(s=>{if(this.tool.checkDpSuccess(s.ResHeader)){let t=new Set,_=[];s.RespBody.roleRoleMappingList.map(A=>{t.has(A.roleId)||(t.add(A.roleId),_.push({label:A.roleAlias,value:A.roleId}))}),this.roles=_}}),this.layers=[],this.form=this.fb.group({}),this.layer.queryAllLayer_ignore1298().subscribe(s=>{this.tool.checkDpSuccess(s.ResHeader)&&(Object.keys(s.RespBody.typeMap).filter(t=>-1==["API_APPLICATION","API_ON_OFF","CLIENT_REG"].indexOf(t)).map(t=>{this.layers.push({label:s.RespBody.typeMap[t],value:t})}),Object.keys(s.RespBody.dataMap).map(t=>{this.form.addControl(`${t}_1`,new h.NI("")),this.form.addControl(`${t}_2`,new h.NI("")),Object.keys(s.RespBody.dataMap[t]).map(_=>{this.dataMap[t][_]=s.RespBody.dataMap[t][_];let A=[];for(let O of s.RespBody.dataMap[t][_])A.push(O.roleId);this.form.controls[`${t}_${_}`].setValue(A)})}))})}query(){this.layers=[],this.form=this.fb.group({}),this.layer.queryAllLayer().subscribe(s=>{this.tool.checkDpSuccess(s.ResHeader)&&(Object.keys(s.RespBody.typeMap).filter(t=>-1==["API_APPLICATION","API_ON_OFF","CLIENT_REG"].indexOf(t)).map(t=>{this.layers.push({label:s.RespBody.typeMap[t],value:t})}),Object.keys(s.RespBody.dataMap).map(t=>{this.form.addControl(`${t}_1`,new h.NI("")),this.form.addControl(`${t}_2`,new h.NI("")),Object.keys(s.RespBody.dataMap[t]).map(_=>{this.dataMap[t][_]=s.RespBody.dataMap[t][_];let A=[];for(let O of s.RespBody.dataMap[t][_])A.push(O.roleId);this.form.controls[`${t}_${_}`].setValue(A)})}))})}save(){var s=this;let t={API_APPLICATION:{},API_ON_OFF:{},CLIENT_REG:{},OPEN_API_KEY:{}},_=[],A=[],O=[],E=[],L=[],F=[],D=[],H=[];this.API_APPLICATION_1.value&&(this.API_APPLICATION_1.value.map(c=>{let d=null;this.dataMap.API_APPLICATION[1].map(u=>{c==u.roleId&&(d=u.lv)}),_.push({reviewType:"API_APPLICATION",layer:1,roleId:c,lv:d})}),t.API_APPLICATION[1]=_),this.API_APPLICATION_2.value&&(this.API_APPLICATION_2.value.map(c=>{let d=null;this.dataMap.API_APPLICATION[2].map(u=>{c==u.roleId&&(d=u.lv)}),A.push({reviewType:"API_APPLICATION",layer:2,roleId:c,lv:d})}),t.API_APPLICATION[2]=A),this.API_ON_OFF_1.value&&(this.API_ON_OFF_1.value.map(c=>{let d=null;this.dataMap.API_ON_OFF[1].map(u=>{c==u.roleId&&(d=u.lv)}),O.push({reviewType:"API_ON_OFF",layer:1,roleId:c,lv:d})}),t.API_ON_OFF[1]=O),this.API_ON_OFF_2.value&&(this.API_ON_OFF_2.value.map(c=>{let d=null;this.dataMap.API_ON_OFF[2].map(u=>{c==u.roleId&&(d=u.lv)}),E.push({reviewType:"API_ON_OFF",layer:2,roleId:c,lv:d})}),t.API_ON_OFF[2]=E),this.CLIENT_REG_1.value&&(this.CLIENT_REG_1.value.map(c=>{let d=null;this.dataMap.CLIENT_REG[1].map(u=>{c==u.roleId&&(d=u.lv)}),L.push({reviewType:"CLIENT_REG",layer:1,roleId:c,lv:d})}),t.CLIENT_REG[1]=L),this.CLIENT_REG_2.value&&(this.CLIENT_REG_2.value.map(c=>{let d=null;this.dataMap.CLIENT_REG[2].map(u=>{c==u.roleId&&(d=u.lv)}),F.push({reviewType:"CLIENT_REG",layer:2,roleId:c,lv:d})}),t.CLIENT_REG[2]=F),this.OPEN_API_KEY_1.value&&(this.OPEN_API_KEY_1.value.map(c=>{let d=null;this.dataMap.OPEN_API_KEY[1].map(u=>{c==u.roleId&&(d=u.lv)}),D.push({reviewType:"OPEN_API_KEY",layer:1,roleId:c,lv:d})}),t.OPEN_API_KEY[1]=D),this.OPEN_API_KEY_2.value&&(this.OPEN_API_KEY_2.value.map(c=>{let d=null;this.dataMap.OPEN_API_KEY[2].map(u=>{c==u.roleId&&(d=u.lv)}),H.push({reviewType:"OPEN_API_KEY",layer:2,roleId:c,lv:d})}),t.OPEN_API_KEY[2]=H),0==Object.keys(t.API_APPLICATION).length&&delete t.API_APPLICATION,0==Object.keys(t.API_ON_OFF).length&&delete t.API_ON_OFF,0==Object.keys(t.CLIENT_REG).length&&delete t.CLIENT_REG,0==Object.keys(t.OPEN_API_KEY).length&&delete t.OPEN_API_KEY,this.layer.saveLayer({dataMap:t}).subscribe(function(){var c=(0,I.Z)(function*(d){if(s.tool.checkDpSuccess(d.ResHeader)){const u=["message.update","message.layer","message.setting","message.success"],N=yield s.tool.getDict(u);s.message.add({severity:"success",summary:`${N["message.update"]} ${N["message.layer"]} ${N["message.setting"]}`,detail:`${N["message.update"]} ${N["message.success"]}!`}),s.query()}});return function(d){return c.apply(this,arguments)}}())}reset(){this.form.reset(),this.query()}get API_APPLICATION_1(){return this.form.get("API_APPLICATION_1")}get API_APPLICATION_2(){return this.form.get("API_APPLICATION_2")}get API_ON_OFF_1(){return this.form.get("API_ON_OFF_1")}get API_ON_OFF_2(){return this.form.get("API_ON_OFF_2")}get CLIENT_REG_1(){return this.form.get("CLIENT_REG_1")}get CLIENT_REG_2(){return this.form.get("CLIENT_REG_2")}get OPEN_API_KEY_1(){return this.form.get("OPEN_API_KEY_1")}get OPEN_API_KEY_2(){return this.form.get("OPEN_API_KEY_2")}}return i.\u0275fac=function(s){return new(s||i)(e.Y36(P.gz),e.Y36(n.W),e.Y36(h.qu),e.Y36(p.g),e.Y36(C),e.Y36(b.ez),e.Y36(x.N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-np0402"]],features:[e.qOj],decls:25,vars:21,consts:[[3,"title"],[1,"card","card-body","bg-light","mt-3"],[3,"formGroup"],[1,"w-100",2,"table-layout","fixed","word-break","break-word","text-align","center"],["scope","col"],[4,"ngIf"],[1,"text-center","mt-3"],["type","submit",1,"btn","tpi-btn","tpi-primary","pull-right","me-2",3,"click"],["type","button",1,"btn","tpi-btn","tpi-cancel","pull-right",3,"click"],["position","top-left"],[4,"ngFor","ngForOf"],[1,"text-center"],["appendTo","body",3,"options","filter","baseZIndex","defaultLabel","panelStyle","formControlName"]],template:function(s,t){1&s&&(e.TgZ(0,"app-container",0)(1,"div",1)(2,"form",2)(3,"table",3),e._UZ(4,"caption"),e.TgZ(5,"thead")(6,"tr")(7,"th",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th",4),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th",4),e._uU(14),e.ALo(15,"translate"),e.qZA()()(),e.YNc(16,S,2,1,"tbody",5),e.qZA(),e.TgZ(17,"div",6)(18,"button",7),e.NdJ("click",function(){return t.save()}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"button",8),e.NdJ("click",function(){return t.reset()}),e._uU(22),e.ALo(23,"translate"),e.qZA()()()()(),e._UZ(24,"p-toast",9)),2&s&&(e.Q6J("title",t.title),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(6),e.Oqu(e.lcZ(9,10,"layer.header.apps")),e.xp6(3),e.Oqu(e.lcZ(12,12,"layer.header.first")),e.xp6(3),e.Oqu(e.lcZ(15,14,"layer.header.second")),e.xp6(2),e.Q6J("ngIf",0!=t.layers.length),e.xp6(3),e.Oqu(e.lcZ(20,16,"button.save")),e.xp6(3),e.Oqu(e.lcZ(23,18,"button.restore")),e.xp6(2),e.Akn(e.DdM(20,Y)))},directives:[Z.e,h._Y,h.JL,h.sg,a.O5,a.sg,G.NU,h.JJ,h.u,$.FN],pipes:[U.X$],styles:["table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{padding:5px;background-color:#434343!important;color:#fff!important}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:5px;background:inherit;border:1px solid #c8c8c8}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f9f9f9}"]}),i})(),canActivate:[f.u6]}];let W=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[P.Bz.forChild(j)],P.Bz]}),i})(),J=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[f.u6],imports:[[a.ez,W,l.W,v.m,h.UX,h.u5]]}),i})()},63710:(T,g,r)=>{r.d(g,{e:()=>o});var a=r(87587),l=r(69808),v=r(51062);function h(e,n){if(1&e&&(a.TgZ(0,"div")(1,"h3",9),a._uU(2),a.ALo(3,"translate"),a.qZA()()),2&e){const p=a.oxw();a.xp6(2),a.Oqu(a.lcZ(3,1,p.title))}}function f(e,n){if(1&e){const p=a.EpF();a.TgZ(0,"div",10)(1,"button",11),a.NdJ("click",function(){return a.CHM(p),a.oxw().return()}),a._UZ(2,"i",12),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"span",13),a._uU(6),a.qZA(),a.TgZ(7,"span",14),a._uU(8),a.qZA()()}if(2&e){const p=a.oxw();a.xp6(3),a.hij(" ",a.lcZ(4,3,"button.return_to_list")," "),a.xp6(3),a.hij("",p.getHead()," /"),a.xp6(2),a.Oqu(p.getTail())}}const P=[[["","center-view","center"]],"*"],I=["[center-view=center]","*"];let o=(()=>{class e{constructor(){this.title="",this.isDefault=!0,this.headerReturn=new a.vpe}ngOnInit(){}return(){this.headerReturn.emit(null)}getHead(){const p=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return p.pop(),p.join(" / ")}getTail(){const p=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return p[p.length-1]}}return e.\u0275fac=function(p){return new(p||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-container"]],inputs:{title:"title",isDefault:"isDefault"},outputs:{headerReturn:"headerReturn"},ngContentSelectors:I,decls:11,vars:2,consts:[[1,"container-fluid","h-100"],[1,"row","position-relative",2,"height","calc(100% - 40px - 0.5rem)"],[1,"col"],[2,"margin-bottom","0.5rem"],[4,"ngIf"],["style","text-align: right",4,"ngIf"],[1,"col","d-flex","justify-content-center"],[1,"my-0","mb-2"],[1,"p-2"],["id","content",1,"page-title"],[2,"text-align","right"],["type","button","icon","",1,"btn","float-start","tpi-header-return",3,"click"],[1,"fas","fa-arrow-left",2,"margin-right","5px"],[1,"mb-0",2,"font-size","0.8rem","color","#666464"],[1,"mb-0",2,"font-size","0.8rem","color","#ff6e38","font-weight","bold"]],template:function(p,m){1&p&&(a.F$t(P),a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),a.YNc(4,h,4,3,"div",4),a.YNc(5,f,9,5,"div",5),a.TgZ(6,"div",6),a.Hsn(7),a.qZA()(),a._UZ(8,"hr",7),a.Hsn(9,1),a._UZ(10,"div",8),a.qZA()()()),2&p&&(a.xp6(4),a.Q6J("ngIf",m.isDefault),a.xp6(1),a.Q6J("ngIf",!m.isDefault))},directives:[l.O5],pipes:[v.X$],styles:[".card.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:400;color:#5a5541}"]}),e})()},92718:(T,g,r)=>{r.d(g,{u:()=>n});var a=r(54004),l=r(70262),v=r(62843),h=r(87587),f=r(45682),P=r(89709),I=r(99291),o=r(3937),e=r(60991);let n=(()=>{class p{constructor(R,M,C,b,x){this.toolService=R,this.tokenService=M,this.router=C,this.ngxService=b,this.logoutService=x}canActivate(){return this.ngxService.stopAll(),!this.toolService.isTokenExpired()||this.toolService.refreshToken().pipe((0,a.U)(R=>!!R.access_token),(0,l.K)(this.handleError.bind(this)))}handleError(R){return setTimeout(()=>this.logoutService.logout()),(0,v._)(()=>R)}}return p.\u0275fac=function(R){return new(R||p)(h.LFG(f.g),h.LFG(P.B),h.LFG(I.F0),h.LFG(o.LA),h.LFG(e.P))},p.\u0275prov=h.Yz7({token:p,factory:p.\u0275fac}),p})()},86347:(T,g,r)=>{r.d(g,{DL:()=>a.D,u6:()=>v.u});var a=r(81233),v=(r(45240),r(92718));r(45682)},1955:(T,g,r)=>{r.d(g,{N:()=>f});var a=r(92340),l=r(57553),v=r(87587),h=r(96614);let f=(()=>{class P{constructor(o){this.api=o,this.api.baseUrl=a.N.dpPath}get basePath(){return a.N.isv4?"dgrv4/11":"tsmpdpaa/11"}addTRole(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.addTRole),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0011`,e)}updateTRoleFunc(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.updateTRoleFunc),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0013`,e)}deleteTRole(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.deleteTRole),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0014`,e)}addTRoleRoleMap(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.addTRoleRoleMap),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0016`,e)}deleteTRoleRoleMap(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.deleteTRoleRoleMap),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0017`,e)}updateTRoleRoleMap(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.updateTRoleRoleMap),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0018`,e)}queryTRoleList_v3_ignore1298(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.queryTRoleList_v3),ReqBody:o};return this.api.excuteNpPost_ignore1298(`${this.basePath}/AA0020`,e)}queryTRoleList_v3(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.queryTRoleList_v3),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0020`,e)}queryTRoleRoleMapDetail(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.queryTRoleRoleMapDetail),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0021`,e)}queryTRoleRoleMap_ignore1298(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.queryTRoleList_v3),ReqBody:o};return this.api.excuteNpPost_ignore1298(`${this.basePath}/AA0022`,e)}queryTRoleRoleMap(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.queryTRoleList_v3),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0022`,e)}queryRoleRoleList(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.queryRoleRoleList),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0023`,e)}createRTMap_before(){let o={ReqHeader:this.api.getReqHeader(l.Nx.createRTMap),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0110?before`,o)}createRTMap(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.createRTMap),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0110`,e)}queryRTMapList_ignore1298(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.queryRTMapList),ReqBody:o};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0111`,e)}queryRTMapList(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.queryRTMapList),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0111`,e)}queryRTMapByPk(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.queryRTMapByPk),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0112`,e)}updateRTMap_before(){let o={ReqHeader:this.api.getReqHeader(l.Nx.updateRTMap),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0113?before`,o)}updateRTMap(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.updateRTMap),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0113`,e)}deleteRTMap(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.deleteRTMap),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0114`,e)}queryRTMapByUk(o){let e={ReqHeader:this.api.getReqHeader(l.Nx.queryRTMapByUk),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0115`,e)}}return P.\u0275fac=function(o){return new(o||P)(v.LFG(h.K))},P.\u0275prov=v.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})()}}]);