"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[2178],{2178:(w,f,i)=>{i.r(f),i.d(f,{Ac0104Module:()=>it});var a=i(78555),A=i(31890),p=i(69808),_=i(86347),g=i(99291),C=i(15861),h=i(14525),d=i(93075),u=i(1694),t=i(87587);let s=(()=>{class n{transform(e){if("[object String]"!=Object.prototype.toString.call(e))return e;switch(e){case"green":return"assets/images/icon_green.png";case"red":return"assets/images/icon_red.png";case"yellow":return"assets/images/icon_yellow.png";default:return""}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"api_status",type:n,pure:!0}),n})();var x=i(71764);let S=(()=>{class n{transform(e){if(e)return x(e).format("YYYY-MM-DD HH:mm:ss.SSS")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"utc_datetime_format",type:n,pure:!0}),n})();var I=i(56435),E=i(45682),D=i(59783),J=i(3937),O=i(41313),U=i(63710),Y=i(75652),M=i(14036),y=i(23099),L=i(17773),F=i(51062);function Q(n,r){if(1&n&&(t.TgZ(0,"div",17)(1,"small",18),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,1,e.dateS.errors.required))}}function k(n,r){if(1&n&&(t.TgZ(0,"div",17)(1,"small",18),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,1,e.dateE.errors.required))}}function q(n,r){if(1&n&&(t.TgZ(0,"div",17)(1,"small",18),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,1,e.indexName.errors.required))}}function P(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",26)(1,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateIndexStatus(1)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateIndexStatus(0)}),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",0==e.selected.length),t.xp6(1),t.Oqu(t.lcZ(3,4,"button.on")),t.xp6(2),t.Q6J("disabled",0==e.selected.length),t.xp6(1),t.Oqu(t.lcZ(6,6,"button.close"))}}function j(n,r){if(1&n&&t._UZ(0,"col",30),2&n){const e=r.$implicit,o=t.oxw(3);t.Q6J("ngStyle",o.colStyle(e))}}function H(n,r){if(1&n&&(t.TgZ(0,"colgroup"),t._UZ(1,"col",28),t.YNc(2,j,1,1,"col",29),t.qZA()),2&n){const e=r.$implicit;t.xp6(2),t.Q6J("ngForOf",e)}}function $(n,r){if(1&n&&(t.TgZ(0,"th",33),t._uU(1),t.qZA()),2&n){const e=r.$implicit,o=t.oxw(3);t.Q6J("pSortableColumn",e.field)("ngStyle",o.colStyle(e)),t.xp6(1),t.hij(" ",e.header," ")}}function B(n,r){if(1&n&&(t.TgZ(0,"tr",31)(1,"th",28),t._UZ(2,"p-tableHeaderCheckbox"),t.qZA(),t.YNc(3,$,2,3,"th",32),t.qZA()),2&n){const e=r.$implicit;t.xp6(3),t.Q6J("ngForOf",e)}}function R(n,r){if(1&n&&t._UZ(0,"img",37),2&n){const e=t.oxw().$implicit,o=t.oxw().$implicit,l=t.oxw(2);t.Q6J("src",e.type.transform(l.transformData(o[e.field])),t.LSH)}}function G(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw().$implicit,l=t.oxw(2);t.xp6(1),t.Oqu(e.type?e.type.transform(o[e.field]):l.transformData(o[e.field]))}}function z(n,r){if(1&n&&(t.TgZ(0,"td",30),t.YNc(1,R,1,1,"img",35),t.YNc(2,G,2,1,"span",36),t.qZA()),2&n){const e=r.$implicit,o=t.oxw(3);t.Q6J("ngStyle",o.colStyle(e)),t.xp6(1),t.Q6J("ngIf","health"===e.field),t.xp6(1),t.Q6J("ngIf","health"!=e.field)}}function V(n,r){if(1&n&&(t.TgZ(0,"tr",31)(1,"td"),t._UZ(2,"p-tableCheckbox",34),t.qZA(),t.YNc(3,z,3,3,"td",29),t.qZA()),2&n){const e=r.$implicit,o=r.columns;t.xp6(2),t.Q6J("value",e),t.xp6(1),t.Q6J("ngForOf",o)}}function W(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td")(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA()()()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.uIk("colspan",e.length+1),t.xp6(2),t.AsE("",t.lcZ(4,3,"row_count"),": ",o.rowcount,"")}}function X(n,r){if(1&n&&t.YNc(0,W,5,5,"tr",36),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.rowcount)}}function K(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=r.$implicit;t.xp6(1),t.uIk("colspan",e.length+1),t.xp6(1),t.hij(" ",t.lcZ(3,2,"no_rec")," ")}}const tt=function(){return{"word-wrap":"break-word"}};function et(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p-table",19),t.NdJ("selectionChange",function(l){return t.CHM(e),t.oxw().selected=l}),t.YNc(1,P,7,8,"ng-template",20),t.YNc(2,H,3,1,"ng-template",21),t.YNc(3,B,4,1,"ng-template",22),t.YNc(4,V,4,2,"ng-template",23),t.YNc(5,X,1,1,"ng-template",24),t.YNc(6,K,4,4,"ng-template",25),t.qZA()}if(2&n){const e=t.oxw();t.Akn(t.DdM(5,tt)),t.Q6J("columns",e.cols)("value",e.data)("selection",e.selected)}}const N=function(){return{width:"95%"}},T=function(){return{width:"100%"}},nt=function(){return{marginTop:"60px"}},ot=[{path:"",component:(()=>{class n extends h.H{constructor(e,o,l,c,m,Z,b,v,rt){super(e,o),this.fb=l,this.tool=c,this.idxStat=m,this.datetime_format=Z,this.messageService=b,this.ngxService=v,this.serverService=rt,this.dateSmaxDate=new Date,this.dateEminDate=new Date,this.indexs=[],this.cols=[],this.data=new Array,this.rowcount=0,this.selected=new Array,this.form=this.fb.group({dateS:new d.NI("",[u.np()]),timePickerS:new d.NI({hour:0,minute:0}),dateE:new d.NI("",[u.np()]),timePickerE:new d.NI({hour:0,minute:0}),indexName:new d.NI(null,[u.np()])})}ngOnInit(){this.cols=[{field:"index",header:"Name"},{field:"health",header:"Health",type:this.idxStat},{field:"status",header:"Status"},{field:"pri",header:"Primaries"},{field:"docs.count",header:"Docs Count"},{field:"ss",header:"Storage Size"},{field:"creation.date.string",header:"Create Time",type:this.datetime_format}],this.serverService.queryAllIndex({}).subscribe(c=>{if(this.tool.checkDpSuccess(c.ResHeader)&&c.RespBody.indexList)for(let m of c.RespBody.indexList)this.indexs.push({label:m,value:m})});let o=this.route.snapshot.data,l=new Date;if(o.data&&o.data.fulltext){let c=this.tool.addDay(l,-7);this.form.get("dateS").setValue(c),this.form.get("dateE").setValue(l)}else{let c=new Date;c.setHours(0,0,0,0),this.form.get("dateS").setValue(this.tool.addDay(c,-1)),this.form.get("dateE").setValue(this.tool.addDay(c,1))}this.form.get("dateS").valueChanges.subscribe(c=>{this.dateEminDate=new Date(c)}),this.form.get("dateE").valueChanges.subscribe(c=>{this.dateSmaxDate=new Date(c)})}submitForm(){this.ngxService.start(),this.data=[],this.selected=[],this.rowcount=this.data.length;let e={timeS:this.tool.formateDate(this.tool.addDay(this.dateS.value,-1)),timeE:this.tool.formateDate(this.dateE.value),idxName:this.indexName.value?this.indexName.value:""};this.serverService.getIndex(e).subscribe(o=>{var l;this.tool.checkDpSuccess(o.ResHeader)&&(this.data=null!==(l=o.RespBody.listObject)&&void 0!==l?l:[],this.rowcount=this.data.length),this.ngxService.stop()})}updateIndexStatus(e){var o=this;this.ngxService.start();let l=[];this.selected.map(m=>{l.push(m.index)});let c={indexList:l,isOpen:this.tool.Base64Encoder(this.tool.BcryptEncoder(JSON.stringify(e)))+","+this.isOpen(e)};this.serverService.updateIndexOpenOrClose(c).subscribe(function(){var m=(0,C.Z)(function*(Z){const v=yield o.tool.getDict(["message.update","message.success"]);o.messageService.add({severity:"success",summary:`${v["message.update"]} Index Status`,detail:`${v["message.update"]} ${v["message.success"]}`}),o.submitForm()});return function(Z){return m.apply(this,arguments)}}())}onClearClick(e){this.form.get(e).setErrors({error:"required"})}onTodayClick(e){this.form.get(e).setValue(new Date)}colStyle(e){switch(e.field){case"creation.date.string":case"index":return{width:"100px"};default:return{width:"50px"}}}transformData(e){return"string"!=typeof e?"":e}isOpen(e){return 0==e?"1":1==e?"0":""}get dateS(){return this.form.get("dateS")}get timePickerS(){return this.form.get("timePickerS")}get dateE(){return this.form.get("dateE")}get timePickerE(){return this.form.get("timePickerE")}get indexName(){return this.form.get("indexName")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.gz),t.Y36(I.W),t.Y36(d.qu),t.Y36(E.g),t.Y36(s),t.Y36(S),t.Y36(D.ez),t.Y36(J.LA),t.Y36(O.N))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ac0104"]],features:[t._Bn([s,S]),t.qOj],decls:28,vars:40,consts:[[3,"title"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"col-8"],[1,"control-label","required"],[1,"row"],[1,"col-6"],["formControlName","dateS","dateFormat","yy-mm-dd","showTime","true","showButtonBar","true","baseZIndex","2000","appendTo","body",3,"inputStyle","maxDate","showIcon","onClearClick","onTodayClick"],["class","text-danger",4,"ngIf"],["formControlName","dateE","dateFormat","yy-mm-dd","showTime","true","showButtonBar","true","appendTo","body",3,"inputStyle","showIcon","minDate","onClearClick","onTodayClick"],[1,"col-4"],["for","indexName",1,"control-label","required"],["id","indexName","formControlName","indexName",3,"showClear","filter","options","placeholder"],[1,"col-12","col-xl-3"],["type","submit",1,"btn","tpi-btn","tpi-primary","loat-left",3,"disabled"],["styleClass","p-datatable-striped","responsiveLayout","scroll",3,"columns","value","selection","style","selectionChange",4,"ngIf"],["position","top-left"],[1,"text-danger"],[1,"form-text"],["styleClass","p-datatable-striped","responsiveLayout","scroll",3,"columns","value","selection","selectionChange"],["pTemplate","caption"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],[1,"ui-helper-clearfix"],["type","button",1,"btn","tpi-btn","tpi-primary","float-start","me-1",3,"disabled","click"],[2,"width","2.25em"],[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],[2,"text-align","center"],[3,"pSortableColumn","ngStyle",4,"ngFor","ngForOf"],[3,"pSortableColumn","ngStyle"],[3,"value"],["style","width: 20px;height: 20px;",3,"src",4,"ngIf"],[4,"ngIf"],[2,"width","20px","height","20px",3,"src"]],template:function(e,o){1&e&&(t.TgZ(0,"app-container",0)(1,"form",1),t.NdJ("ngSubmit",function(){return o.submitForm()}),t.TgZ(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",5)(8,"div",6)(9,"p-calendar",7),t.NdJ("onClearClick",function(){return o.onClearClick("dateS")})("onTodayClick",function(){return o.onTodayClick("dateS")}),t.qZA(),t.YNc(10,Q,4,3,"div",8),t.qZA(),t.TgZ(11,"div",6)(12,"p-calendar",9),t.NdJ("onClearClick",function(){return o.onClearClick("dateE")})("onTodayClick",function(){return o.onTodayClick("dateE")}),t.qZA(),t.YNc(13,k,4,3,"div",8),t.qZA()()(),t.TgZ(14,"div",10)(15,"label",11),t._uU(16,"Index"),t.qZA(),t._UZ(17,"p-dropdown",12),t.ALo(18,"translate"),t.YNc(19,q,4,3,"div",8),t.qZA()(),t.TgZ(20,"div",2)(21,"div",13)(22,"button",14),t._uU(23),t.ALo(24,"translate"),t.qZA()()()(),t._UZ(25,"hr"),t.YNc(26,et,7,6,"p-table",15),t.qZA(),t._UZ(27,"p-toast",16)),2&e&&(t.Q6J("title",o.title),t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(4),t.Oqu(t.lcZ(6,28,"date_range")),t.xp6(4),t.Akn(t.DdM(34,N)),t.Q6J("inputStyle",t.DdM(35,T))("maxDate",o.dateSmaxDate)("showIcon",!0)("showIcon",!0),t.xp6(1),t.Q6J("ngIf",(null==o.dateS?null:o.dateS.invalid)&&((null==o.dateS?null:o.dateS.dirty)||(null==o.dateS?null:o.dateS.touched))),t.xp6(2),t.Akn(t.DdM(36,N)),t.Q6J("inputStyle",t.DdM(37,T))("showIcon",!0)("minDate",o.dateEminDate),t.xp6(1),t.Q6J("ngIf",(null==o.dateE?null:o.dateE.invalid)&&((null==o.dateE?null:o.dateE.dirty)||(null==o.dateE?null:o.dateE.touched))),t.xp6(4),t.Akn(t.DdM(38,T)),t.s9C("placeholder",t.lcZ(18,30,"plz_chs")),t.Q6J("showClear",!0)("filter",!0)("options",o.indexs),t.xp6(2),t.Q6J("ngIf",(null==o.indexName?null:o.indexName.invalid)&&((null==o.indexName?null:o.indexName.dirty)||(null==o.indexName?null:o.indexName.touched))),t.xp6(3),t.Q6J("disabled",o.form.invalid),t.xp6(1),t.Oqu(t.lcZ(24,32,"button.query")),t.xp6(3),t.Q6J("ngIf",o.cols),t.xp6(1),t.Akn(t.DdM(39,nt)))},directives:[U.e,d._Y,d.JL,d.sg,Y.f,d.JJ,d.u,p.O5,M.Lt,y.iA,D.jx,p.sg,p.PC,y.Mo,y.lQ,y.UA,L.FN],pipes:[F.X$],styles:[""]}),n})(),canActivate:[_.u6]}];let at=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.Bz.forChild(ot)],g.Bz]}),n})(),it=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[_.u6],imports:[[p.ez,at,a.W,A.m,_.DL,_.DL,d.UX,d.u5]]}),n})()},63710:(w,f,i)=>{i.d(f,{e:()=>d});var a=i(87587),A=i(69808),p=i(51062);function _(u,t){if(1&u&&(a.TgZ(0,"div")(1,"h3",9),a._uU(2),a.ALo(3,"translate"),a.qZA()()),2&u){const s=a.oxw();a.xp6(2),a.Oqu(a.lcZ(3,1,s.title))}}function g(u,t){if(1&u){const s=a.EpF();a.TgZ(0,"div",10)(1,"button",11),a.NdJ("click",function(){return a.CHM(s),a.oxw().return()}),a._UZ(2,"i",12),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"span",13),a._uU(6),a.qZA(),a.TgZ(7,"span",14),a._uU(8),a.qZA()()}if(2&u){const s=a.oxw();a.xp6(3),a.hij(" ",a.lcZ(4,3,"button.return_to_list")," "),a.xp6(3),a.hij("",s.getHead()," /"),a.xp6(2),a.Oqu(s.getTail())}}const C=[[["","center-view","center"]],"*"],h=["[center-view=center]","*"];let d=(()=>{class u{constructor(){this.title="",this.isDefault=!0,this.headerReturn=new a.vpe}ngOnInit(){}return(){this.headerReturn.emit(null)}getHead(){const s=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return s.pop(),s.join(" / ")}getTail(){const s=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return s[s.length-1]}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275cmp=a.Xpm({type:u,selectors:[["app-container"]],inputs:{title:"title",isDefault:"isDefault"},outputs:{headerReturn:"headerReturn"},ngContentSelectors:h,decls:11,vars:2,consts:[[1,"container-fluid","h-100"],[1,"row","position-relative",2,"height","calc(100% - 40px - 0.5rem)"],[1,"col"],[2,"margin-bottom","0.5rem"],[4,"ngIf"],["style","text-align: right",4,"ngIf"],[1,"col","d-flex","justify-content-center"],[1,"my-0","mb-2"],[1,"p-2"],["id","content",1,"page-title"],[2,"text-align","right"],["type","button","icon","",1,"btn","float-start","tpi-header-return",3,"click"],[1,"fas","fa-arrow-left",2,"margin-right","5px"],[1,"mb-0",2,"font-size","0.8rem","color","#666464"],[1,"mb-0",2,"font-size","0.8rem","color","#ff6e38","font-weight","bold"]],template:function(s,x){1&s&&(a.F$t(C),a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),a.YNc(4,_,4,3,"div",4),a.YNc(5,g,9,5,"div",5),a.TgZ(6,"div",6),a.Hsn(7),a.qZA()(),a._UZ(8,"hr",7),a.Hsn(9,1),a._UZ(10,"div",8),a.qZA()()()),2&s&&(a.xp6(4),a.Q6J("ngIf",x.isDefault),a.xp6(1),a.Q6J("ngIf",!x.isDefault))},directives:[A.O5],pipes:[p.X$],styles:[".card.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:400;color:#5a5541}"]}),u})()},86347:(w,f,i)=>{i.d(f,{DL:()=>a.D,u6:()=>p.u});var a=i(81233),p=(i(45240),i(92718));i(45682)}}]);