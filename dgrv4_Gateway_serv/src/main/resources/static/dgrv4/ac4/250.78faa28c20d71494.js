"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[250],{74856:(v,g,l)=>{l.d(g,{J:()=>f});var s=l(87587),m=l(93075);let f=(()=>{class _{constructor(){this.placeholder="",this.class=""}onSearch(){this.searchFn&&this.searchFn()}onKeydown(r){r.isComposing||this.onSearch()}}return _.\u0275fac=function(r){return new(r||_)},_.\u0275cmp=s.Xpm({type:_,selectors:[["app-search-input"]],inputs:{placeholder:"placeholder",control:"control",searchFn:"searchFn",class:"class"},decls:3,vars:2,consts:[[1,"p-input-icon-right","w-100"],[1,"pi","pi-search","tpi-i-search",3,"click"],["type","search",1,"form-control","tpi-i-input",3,"placeholder","formControl","keydown.enter"]],template:function(r,d){1&r&&(s.TgZ(0,"span",0)(1,"i",1),s.NdJ("click",function(){return d.onSearch()}),s.qZA(),s.TgZ(2,"input",2),s.NdJ("keydown.enter",function(b){return d.onKeydown(b)}),s.qZA()()),2&r&&(s.xp6(2),s.Q6J("placeholder",d.placeholder)("formControl",d.control))},directives:[m.Fj,m.JJ,m.oH],styles:[""]}),_})()},80250:(v,g,l)=>{l.r(g),l.d(g,{Np0304Module:()=>wt});var s=l(69808),m=l(78555),f=l(31890),_=l(93075),h=l(86347),r=l(99291),d=l(15861),y=l(14525),b=l(57553),t=l(87587),N=l(56435),L=l(45682),C=l(71330),w=l(22734),T=l(59783),K=l(1955),D=l(63710),q=l(74856),k=l(23099),O=l(40845),U=l(4119),R=l(55069),F=l(17773),I=l(51062);const J=["openApiKeyForm"];function $(i,o){1&i&&t._UZ(0,"col"),2&i&&t.Udp("width",o.$implicit.width)}function Y(i,o){if(1&i&&(t.TgZ(0,"colgroup"),t.YNc(1,$,1,2,"col",21),t.qZA(),t.TgZ(2,"colgroup",22),t._uU(3),t.ALo(4,"translate"),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(2),t.Oqu(t.lcZ(4,2,"action"))}}function B(i,o){if(1&i&&(t.TgZ(0,"th",25),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.header," ")}}function Q(i,o){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,B,2,1,"th",23),t.TgZ(2,"th",24),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(2),t.hij("",t.lcZ(4,2,"action")," ")}}function S(i,o){if(1&i&&(t.TgZ(0,"td")(1,"span"),t._uU(2),t.qZA()()),2&i){const e=o.$implicit,n=t.oxw().$implicit;t.Udp("width",e.width),t.xp6(2),t.hij(" ",n[e.field]," ")}}function P(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.YNc(1,S,3,3,"td",21),t.TgZ(2,"td",26)(3,"button",27),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).viewClientOpenApiList(a)}),t.ALo(4,"translate"),t.qZA()()()}if(2&i){const e=o.columns;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(2),t.Q6J("pTooltip",t.lcZ(4,2,"button.detail"))}}function E(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",28)(2,"span",29),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).moreClientList()}),t._uU(6),t.ALo(7,"translate"),t._UZ(8,"i",31),t.qZA()()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.uIk("colspan",e.length+1),t.xp6(2),t.AsE("",t.lcZ(4,4,"row_count"),": ",n.clientListRowcount,""),t.xp6(3),t.hij("",t.lcZ(7,6,"button.more")," ")}}function M(i,o){if(1&i&&t.YNc(0,E,9,8,"tr",12),2&i){const e=t.oxw(2);t.Q6J("ngIf",e.clientListRowcount)}}function j(i,o){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i){const e=o.$implicit;t.xp6(1),t.uIk("colspan",e.length+1),t.xp6(1),t.hij(" ",t.lcZ(3,2,"no_rec")," ")}}const Z=function(){return{"word-break":"break-word"}};function H(i,o){if(1&i&&(t.TgZ(0,"p-table",15),t.YNc(1,Y,5,4,"ng-template",16),t.YNc(2,Q,5,4,"ng-template",17),t.YNc(3,P,5,4,"ng-template",18),t.YNc(4,M,1,1,"ng-template",19),t.YNc(5,j,4,4,"ng-template",20),t.qZA()),2&i){const e=t.oxw();t.Akn(t.DdM(4,Z)),t.Q6J("columns",e.clientListCols)("value",e.clientList)}}function z(i,o){1&i&&t._UZ(0,"col"),2&i&&t.Udp("width",o.$implicit.width)}function G(i,o){if(1&i&&(t.TgZ(0,"colgroup"),t.YNc(1,z,1,2,"col",21),t.qZA(),t.TgZ(2,"colgroup",33),t._uU(3),t.ALo(4,"translate"),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(2),t.Oqu(t.lcZ(4,2,"action"))}}function V(i,o){if(1&i&&(t.TgZ(0,"th",25),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.header," ")}}function W(i,o){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,V,2,1,"th",23),t.TgZ(2,"th",34),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(2),t.hij("",t.lcZ(4,2,"action")," ")}}function X(i,o){if(1&i&&(t.TgZ(0,"td")(1,"span"),t._uU(2),t.qZA()()),2&i){const e=o.$implicit,n=t.oxw().$implicit;t.Udp("width",e.width),t.xp6(2),t.hij(" ",n[e.field]," ")}}function tt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(e);const p=t.oxw().$implicit;return t.oxw(2).applyOpenApiKey("update",p)}),t.ALo(1,"translate"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("disabled",0==e.canCreate)("pTooltip",t.lcZ(1,2,"button.change"))}}function et(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(e);const p=t.oxw().$implicit;return t.oxw(2).applyOpenApiKey("revoke",p)}),t.ALo(1,"translate"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("disabled",0==e.canCreate)("pTooltip",t.lcZ(1,2,"button.revoke"))}}function it(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.YNc(1,X,3,3,"td",21),t.TgZ(2,"td",35)(3,"button",27),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).queryOpenApiKeyDetail(a)}),t.ALo(4,"translate"),t.qZA(),t.YNc(5,tt,2,4,"button",36),t.YNc(6,et,2,4,"button",37),t.qZA()()}if(2&i){const e=o.$implicit,n=o.columns;t.xp6(1),t.Q6J("ngForOf",n),t.xp6(2),t.Q6J("pTooltip",t.lcZ(4,4,"button.detail")),t.xp6(2),t.Q6J("ngIf","Y"==e.updateVisiable),t.xp6(1),t.Q6J("ngIf","Y"==e.revokeVisiable)}}function nt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",28)(2,"span",29),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).moreOpenApiList()}),t._uU(6),t.ALo(7,"translate"),t._UZ(8,"i",31),t.qZA()()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.uIk("colspan",e.length+1),t.xp6(2),t.AsE("",t.lcZ(4,4,"row_count"),": ",n.openApiKeyListRowcount,""),t.xp6(3),t.hij("",t.lcZ(7,6,"button.more")," ")}}function ot(i,o){if(1&i&&t.YNc(0,nt,9,8,"tr",12),2&i){const e=t.oxw(2);t.Q6J("ngIf",e.openApiKeyListRowcount)}}function pt(i,o){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i){const e=o.$implicit;t.xp6(1),t.uIk("colspan",e.length+1),t.xp6(1),t.hij(" ",t.lcZ(3,2,"no_rec")," ")}}function lt(i,o){if(1&i&&(t.TgZ(0,"p-table",32),t.YNc(1,G,5,4,"ng-template",16),t.YNc(2,W,5,4,"ng-template",17),t.YNc(3,it,7,6,"ng-template",18),t.YNc(4,ot,1,1,"ng-template",19),t.YNc(5,pt,4,4,"ng-template",20),t.qZA()),2&i){const e=t.oxw();t.Akn(t.DdM(4,Z)),t.Q6J("columns",e.openApiKeyListCols)("value",e.openApiKeyList)}}function at(i,o){1&i&&t._UZ(0,"col"),2&i&&t.Udp("width",o.$implicit.width)}function ct(i,o){if(1&i&&(t.TgZ(0,"colgroup"),t.YNc(1,at,1,2,"col",21),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function st(i,o){if(1&i&&(t.TgZ(0,"th",25),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.header," ")}}function _t(i,o){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,st,2,1,"th",23),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function rt(i,o){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n[e.field]," ")}}function ut(i,o){1&i&&(t.TgZ(0,"span"),t._uU(1,"\uff0c"),t.qZA())}function dt(i,o){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,ut,2,0,"span",12),t.qZA()),2&i){const e=o.$implicit,n=o.index,p=t.oxw(2).$implicit,a=t.oxw().$implicit,c=t.oxw(3);t.xp6(1),t.hij(" ",e.value," "),t.xp6(1),t.Q6J("ngIf",c.checkLength(a[p.field],n))}}function mt(i,o){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,dt,3,2,"span",44),t.ALo(2,"keyvalue"),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,n[e.field]))}}function ht(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"span")(1,"a",45),t.NdJ("click",function(){t.CHM(e);const p=t.oxw(2).$implicit;return t.oxw(3).downloadFile(p.filePath,p.fileName)}),t._uU(2),t.qZA()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw().$implicit;t.xp6(2),t.hij(" ",n[e.field]," ")}}function gt(i,o){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,rt,2,1,"span",12),t.YNc(2,mt,3,3,"div",12),t.YNc(3,ht,3,1,"span",12),t.qZA()),2&i){const e=o.$implicit;t.Udp("width",e.width),t.xp6(1),t.Q6J("ngIf","themeDatas"!=e.field&&"fileName"!=e.field),t.xp6(1),t.Q6J("ngIf","themeDatas"==e.field),t.xp6(1),t.Q6J("ngIf","fileName"==e.field)}}function At(i,o){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,gt,4,5,"td",21),t.qZA()),2&i){const e=o.columns;t.xp6(1),t.Q6J("ngForOf",e)}}function ft(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",28)(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).moreOpenApiKeyDetailData()}),t._uU(6),t.ALo(7,"translate"),t._UZ(8,"i",31),t.qZA()()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw(3);t.xp6(1),t.uIk("colspan",e.length),t.xp6(2),t.AsE("",t.lcZ(4,4,"row_count"),": ",n.openApiKeyDetailRowcount,""),t.xp6(3),t.hij("",t.lcZ(7,6,"button.more")," ")}}function yt(i,o){if(1&i&&t.YNc(0,ft,9,8,"tr",12),2&i){const e=t.oxw(3);t.Q6J("ngIf",e.openApiKeyDetailRowcount)}}function bt(i,o){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i){const e=o.$implicit;t.xp6(1),t.uIk("colspan",e.length),t.xp6(1),t.hij(" ",t.lcZ(3,2,"no_rec")," ")}}function Zt(i,o){if(1&i&&(t.TgZ(0,"p-table",43),t.YNc(1,ct,2,1,"ng-template",16),t.YNc(2,_t,2,1,"ng-template",17),t.YNc(3,At,2,1,"ng-template",18),t.YNc(4,yt,1,1,"ng-template",19),t.YNc(5,bt,4,4,"ng-template",20),t.qZA()),2&i){const e=t.oxw(2);t.Akn(t.DdM(4,Z)),t.Q6J("columns",e.openApiKeyDetailCols)("value",e.openApiKeyDetailData.dataList)}}function xt(i,o){if(1&i&&(t.TgZ(0,"form")(1,"div",6)(2,"div",40)(3,"label",41),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._uU(6,"\uff1a "),t.TgZ(7,"label"),t._uU(8),t.qZA()(),t.TgZ(9,"div",40)(10,"label",41),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._uU(13,"\uff1a "),t.TgZ(14,"label"),t._uU(15),t.qZA()(),t.TgZ(16,"div",40)(17,"label",41),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._uU(20,"\uff1a "),t.TgZ(21,"label"),t._uU(22),t.qZA()()(),t.TgZ(23,"div",6)(24,"div",7)(25,"label",41),t._uU(26,"Open API Key"),t.qZA(),t._uU(27,"\uff1a "),t.TgZ(28,"label"),t._uU(29),t.qZA()()(),t.TgZ(30,"div",6)(31,"div",7)(32,"label",41),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._uU(35,"\uff1a "),t.TgZ(36,"label"),t._uU(37),t.qZA()()(),t.TgZ(38,"div",6)(39,"div",7)(40,"label",41),t._uU(41,"Secret Key"),t.qZA(),t._uU(42,"\uff1a "),t.TgZ(43,"label"),t._uU(44),t.qZA()()(),t.TgZ(45,"div",6)(46,"div",40)(47,"label",41),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._uU(50,"\uff1a "),t.TgZ(51,"label"),t._uU(52),t.qZA()(),t.TgZ(53,"div",40)(54,"label",41),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._uU(57,"\uff1a "),t.TgZ(58,"label"),t._uU(59),t.qZA()(),t.TgZ(60,"div",40)(61,"label",41),t._uU(62),t.ALo(63,"translate"),t.qZA(),t._uU(64,"\uff1a "),t.TgZ(65,"label"),t._uU(66),t.qZA()()(),t.TgZ(67,"div",6)(68,"div",40)(69,"label",41),t._uU(70),t.ALo(71,"translate"),t.qZA(),t._uU(72,"\uff1a "),t.TgZ(73,"label"),t._uU(74),t.qZA()(),t.TgZ(75,"div",40)(76,"label",41),t._uU(77),t.ALo(78,"translate"),t.qZA(),t._uU(79,"\uff1a "),t.TgZ(80,"label"),t._uU(81),t.qZA()(),t.TgZ(82,"div",40)(83,"label",41),t._uU(84),t.ALo(85,"translate"),t.qZA(),t._uU(86,"\uff1a "),t.TgZ(87,"label"),t._uU(88),t.qZA()()(),t.TgZ(89,"div",6)(90,"div",7)(91,"label",41),t._uU(92),t.ALo(93,"translate"),t.qZA(),t._uU(94,"\uff1a "),t.YNc(95,Zt,6,5,"p-table",42),t.qZA()()()),2&i){const e=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,24,"client_id")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.clientId),t.xp6(3),t.Oqu(t.lcZ(12,26,"client_name")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.clientName),t.xp6(3),t.Oqu(t.lcZ(19,28,"client_alias")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.clientAlias),t.xp6(7),t.Oqu(e.openApiKeyDetailData.openApiKey),t.xp6(4),t.Oqu(t.lcZ(34,30,"open_api_key_alias")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.openApiKeyAlias),t.xp6(7),t.Oqu(e.openApiKeyDetailData.secretKey),t.xp6(4),t.Oqu(t.lcZ(49,32,"status")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.openApiKeyStatusName),t.xp6(3),t.Oqu(t.lcZ(56,34,"times_quota")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.timesQuota),t.xp6(3),t.Oqu(t.lcZ(63,36,"use_quota")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.timesThreshold),t.xp6(4),t.Oqu(t.lcZ(71,38,"create_date")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.createDateTime),t.xp6(3),t.Oqu(t.lcZ(78,40,"expired_date")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.expiredAt),t.xp6(3),t.Oqu(t.lcZ(85,42,"revoked_date")),t.xp6(4),t.Oqu(e.openApiKeyDetailData.revokedAt),t.xp6(4),t.Oqu(t.lcZ(93,44,"auth_api")),t.xp6(3),t.Q6J("ngIf",e.openApiKeyDetailCols)}}function Tt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"app-open-api-key-form",47,48),t.NdJ("refresh",function(p){return t.CHM(e),t.oxw(2).refreshData(p)}),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("data",e.applyOpenApiKeyDataParams)}}function vt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div"),t.YNc(1,Tt,2,1,"app-open-api-key-form",46),t._UZ(2,"br"),t.TgZ(3,"div",13)(4,"div",7)(5,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().changePage("viewClientOpenApiList",!0)}),t._uU(6),t.ALo(7,"translate"),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.applyOpenApiKeyDataParams),t.xp6(5),t.Oqu(t.lcZ(7,2,"button.return_to_list"))}}const Nt=function(){return{marginTop:"60px"}},Lt=[{path:"",component:(()=>{class i extends y.H{constructor(e,n,p,a,c,x,A,u){super(e,n),this.fb=p,this.tool=a,this.openApiService=c,this.file=x,this.message=A,this.roleService=u,this.currentTitle=this.title,this.pageNum=1,this.clientListCols=[],this.clientList=new Array,this.clientListRowcount=0,this.applyOpenApiKeyTitle="",this.updateOpenApiKeyTitle="",this.revokeOpenApiKeyTitle="",this.openApiKeyListTitle="",this.openApiKeyListCols=[],this.openApiKeyList=new Array,this.openApiKeyListRowcount=0,this.openApiKeyDetailTitle="",this.openApiKeyDetailCols=[],this.openApiKeyDetailRowcount=0,this.canCreate=!1}ngOnInit(){this.form=this.fb.group({keyword:new _.NI("")}),this.roleService.queryRTMapByUk({txIdList:["DPB0092"]}).subscribe(e=>{this.tool.checkDpSuccess(e.ResHeader)&&(this.canCreate=!!e.RespBody.dataList.find(n=>"DPB0092"===n.txId)&&e.RespBody.dataList.find(n=>"DPB0092"===n.txId).available)}),this.init()}checkLength(e,n){return Object.keys(e).length>1&&n+1!=Object.keys(e).length}init(){var e=this;return(0,d.Z)(function*(){const p=yield e.tool.getDict(["client_id","client_name","client_alias","open_api_key_alias","create_date","expired_date","revoked_date","status","api_name","api_desc","org_name","theme_name","api_doc","button.view","button.detail","button.apply_open_api_key","button.change","button.revoke","button.apply","api_key_list"]);e.clientListCols=[{field:"clientId",header:p.client_id},{field:"clientName",header:p.client_name},{field:"clientAlias",header:p.client_alias}],e.openApiKeyListTitle=`${e.title} > ${p.api_key_list}`,e.openApiKeyListCols=[{field:"clientId",header:p.client_id,width:"15%"},{field:"openApiKey",header:"API Key",width:"25%"},{field:"openApiKeyAlias",header:p.open_api_key_alias,width:"15%"},{field:"createDateTime",header:p.create_date,width:"10%"},{field:"expiredAt",header:p.expired_date,width:"10%"},{field:"revokedAt",header:p.revoked_date,width:"10%"},{field:"openApiKeyStatusName",header:p.status,width:"5%"}],e.openApiKeyDetailTitle=`${e.title} > ${p.api_key_list} > ${p["button.detail"]}`,e.openApiKeyDetailCols=[{field:"apiName",header:p.api_name,width:"15%"},{field:"apiDesc",header:p.api_desc,width:"15%"},{field:"orgName",header:p.org_name,width:"15%"}],e.applyOpenApiKeyTitle=`${e.title} > ${p.api_key_list} > ${p["button.apply"]}`,e.updateOpenApiKeyTitle=`${e.title} > ${p.api_key_list} > ${p["button.change"]}`,e.revokeOpenApiKeyTitle=`${e.title} > ${p.api_key_list} > ${p["button.revoke"]}`,e.clientList=[],e.clientListRowcount=e.clientList.length,e.currentClient={},e.openApiService.queryClientListByRegStatusLike_ignore1298({keyword:e.keyword.value,regStatus:"2"}).subscribe(c=>{e.tool.checkDpSuccess(c.ResHeader)&&(e.pageNum=1,e.clientList=c.RespBody.dataList,e.clientListRowcount=e.clientList.length)})})()}queryClientList(){this.clientList=[],this.clientListRowcount=this.clientList.length,this.currentClient={},this.openApiService.queryClientListByRegStatusLike({keyword:this.keyword.value,regStatus:"2"}).subscribe(n=>{this.tool.checkDpSuccess(n.ResHeader)&&(this.pageNum=1,this.clientList=n.RespBody.dataList,this.clientListRowcount=this.clientList.length)})}moreClientList(){this.openApiService.queryClientListByRegStatusLike({clientId:this.clientList[this.clientList.length-1].clientId,keyword:this.keyword.value,regStatus:"2"}).subscribe(n=>{this.tool.checkDpSuccess(n.ResHeader)&&(this.clientList=this.clientList.concat(n.RespBody.dataList),this.clientListRowcount=this.clientList.length)})}viewClientOpenApiList(e){this.currentClient=e,this.openApiKeyList=[],this.openApiKeyListRowcount=this.openApiKeyList.length,this.openApiService.queryOpenApiKeyByClientId({clientId:this.currentClient.clientId}).subscribe(p=>{this.currentTitle=this.openApiKeyListTitle,this.pageNum=2,this.tool.checkDpSuccess(p.ResHeader)&&(this.openApiKeyList=p.RespBody.dataList,this.openApiKeyListRowcount=this.openApiKeyList.length)})}moreOpenApiList(){var e;let n={openApiKeyId:this.openApiKeyList[this.openApiKeyList.length-1].openApiKeyId,clientId:null===(e=this.currentClient)||void 0===e?void 0:e.clientId};this.openApiService.queryOpenApiKeyByClientId(n).subscribe(p=>{this.tool.checkDpSuccess(p.ResHeader)&&(this.openApiKeyList=this.openApiKeyList.concat(p.RespBody.dataList),this.openApiKeyListRowcount=this.openApiKeyList.length)})}applyOpenApiKey(e,n){var p;let a={clientId:null===(p=this.currentClient)||void 0===p?void 0:p.clientId,encodeReqSubtype:this.tool.Base64Encoder(this.tool.BcryptEncoder("OPEN_API_KEY_APPLICA"))+",0"};switch(e){case"create":a.encodeReqSubtype=this.tool.Base64Encoder(this.tool.BcryptEncoder("OPEN_API_KEY_APPLICA"))+",0";break;case"update":a.encodeReqSubtype=this.tool.Base64Encoder(this.tool.BcryptEncoder("OPEN_API_KEY_UPDATE"))+",1",a.openApiKeyId=null==n?void 0:n.openApiKeyId;break;case"revoke":a.encodeReqSubtype=this.tool.Base64Encoder(this.tool.BcryptEncoder("OPEN_API_KEY_REVOKE"))+",2",a.openApiKeyId=null==n?void 0:n.openApiKeyId}this.openApiService.writeOpenApiKeyReq(a).subscribe(c=>{if(this.tool.checkDpSuccess(c.ResHeader)){switch(e){case"create":this.currentTitle=this.applyOpenApiKeyTitle;break;case"update":this.currentTitle=this.updateOpenApiKeyTitle;break;case"revoke":this.currentTitle=this.revokeOpenApiKeyTitle}this.pageNum=4,this.applyOpenApiKeyDataParams={operate:b.mi.create,data:c.RespBody}}})}queryOpenApiKeyDetail(e){this.openApiKeyDetailData={},this.openApiService.queryOpenApiKeyDetailByPk({openApiKeyId:e.openApiKeyId}).subscribe(p=>{this.tool.checkDpSuccess(p.ResHeader)&&(this.openApiKeyDetailData=p.RespBody,this.openApiKeyDetailRowcount=this.openApiKeyDetailData.dataList.length,this.currentTitle=this.openApiKeyDetailTitle,this.pageNum=3)})}moreOpenApiKeyDetailData(){var e,n,p;let a={apiKey:null===(e=this.openApiKeyDetailData)||void 0===e?void 0:e.dataList[this.openApiKeyDetailData.dataList.length-1].apiKey,moduleName:null===(n=this.openApiKeyDetailData)||void 0===n?void 0:n.dataList[this.openApiKeyDetailData.dataList.length-1].moduleName,openApiKeyId:null===(p=this.openApiKeyDetailData)||void 0===p?void 0:p.openApiKeyId};this.openApiService.queryOpenApiKeyDetailByPk(a).subscribe(c=>{this.tool.checkDpSuccess(c.ResHeader)&&(this.openApiKeyDetailData.dataList=this.openApiKeyDetailData.dataList.concat(c.RespBody.dataList),this.openApiKeyDetailRowcount=this.openApiKeyDetailData.dataList.length)})}downloadFile(e,n){this.file.downloadFile({filePath:e}).subscribe(a=>{const c=new FileReader;c.onloadend=function(){const x=new File([a],n),A=window.URL.createObjectURL(x),u=document.createElement("a");document.body.appendChild(u),u.setAttribute("style","display: none"),u.href=A,u.download=n,u.click(),window.URL.revokeObjectURL(A),u.remove()},c.readAsText(a)})}refreshData(e){var n=this;return(0,d.Z)(function*(){const a=yield n.tool.getDict(["message.save","message.requisition.open_api_key","message.success"]);n.message.add({severity:"success",summary:`${a["message.save"]} ${a["message.requisition.open_api_key"]}`,detail:`${a["message.save"]} ${a["message.success"]}!`}),n.viewClientOpenApiList(n.currentClient)})()}changePage(e,n){switch(e){case"queryClientList":this.currentTitle=this.title,this.pageNum=1;break;case"viewClientOpenApiList":this.currentTitle=this.openApiKeyListTitle,this.pageNum=2}n&&this._openApiKeyForm.clearData()}headerReturn(){3==this.pageNum?this.changePage("viewClientOpenApiList",!1):4==this.pageNum?this.changePage("viewClientOpenApiList",!0):this.changePage("queryClientList",!1)}get keyword(){return this.form.get("keyword")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.gz),t.Y36(N.W),t.Y36(_.qu),t.Y36(L.g),t.Y36(C.l),t.Y36(w.I),t.Y36(T.ez),t.Y36(K.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-np0304"]],viewQuery:function(e,n){if(1&e&&t.Gf(J,5),2&e){let p;t.iGM(p=t.CRH())&&(n._openApiKeyForm=p.first)}},features:[t.qOj],decls:36,vars:34,consts:[[3,"title","isDefault","headerReturn"],[3,"hidden"],[3,"formGroup"],[1,"form-group","col-12"],[1,"col-9","col-lg-4","col-sm-6",3,"placeholder","control","searchFn"],["selectionMode","single","styleClass","p-datatable-striped","responsiveLayout","scroll",3,"columns","value","style",4,"ngIf"],[1,"form-group","row"],[1,"col-12","col-xl-12","col-lg-12"],["type","button",1,"btn","tpi-btn","tpi-second","loat-left","me-3",3,"disabled","click"],["styleClass","p-datatable-striped","selectionMode","single","responsiveLayout","scroll",3,"columns","value","style",4,"ngIf"],["type","button",1,"btn","tpi-btn","tpi-primary","float-start","me-3",3,"click"],[1,"card","card-body","bg-light","mt-3"],[4,"ngIf"],[1,"row"],["position","top-left"],["selectionMode","single","styleClass","p-datatable-striped","responsiveLayout","scroll",3,"columns","value"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],[3,"width",4,"ngFor","ngForOf"],[2,"width","50px"],["scope","col",4,"ngFor","ngForOf"],["scope","col",2,"width","50px"],["scope","col"],[2,"text-align","center","width","50px"],["pButton","","pRipple","","type","button","icon","pi pi-eye","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-plain",3,"pTooltip","click"],[2,"color","#b7b7b7"],[2,"vertical-align","middle"],["type","button",1,"btn","tpi-header-return",3,"click"],[1,"fas","fa-angle-double-right",2,"margin-left","5px"],["styleClass","p-datatable-striped","selectionMode","single","responsiveLayout","scroll",3,"columns","value"],[2,"width","150px"],["scope","col",2,"width","150px"],[2,"text-align","center","width","150px"],["pButton","","pRipple","","type","button","icon","fa fa-edit","class","p-button-rounded p-button-text p-button-plain","tooltipPosition","top",3,"disabled","pTooltip","click",4,"ngIf"],["pButton","","pRipple","","type","button","icon","fa fa-trash-alt","class","p-button-rounded p-button-text p-button-plain","tooltipPosition","top",3,"disabled","pTooltip","click",4,"ngIf"],["pButton","","pRipple","","type","button","icon","fa fa-edit","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-plain",3,"disabled","pTooltip","click"],["pButton","","pRipple","","type","button","icon","fa fa-trash-alt","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-plain",3,"disabled","pTooltip","click"],[1,"col-4","col-xl-4","col-lg-4"],[1,"control-label"],["styleClass","p-datatable-striped","selectionMode","single",3,"columns","value","style",4,"ngIf"],["styleClass","p-datatable-striped","selectionMode","single",3,"columns","value"],[4,"ngFor","ngForOf"],["href","javascript:void(0)",3,"click"],[3,"data","refresh",4,"ngIf"],[3,"data","refresh"],["openApiKeyForm",""]],template:function(e,n){1&e&&(t.TgZ(0,"app-container",0),t.NdJ("headerReturn",function(){return n.headerReturn()}),t.TgZ(1,"div",1)(2,"form",2)(3,"div",3),t._UZ(4,"app-search-input",4),t.ALo(5,"translate"),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA()(),t._UZ(8,"hr"),t.YNc(9,H,6,5,"p-table",5),t.qZA(),t.TgZ(10,"div",1)(11,"form")(12,"div",6)(13,"div",7)(14,"button",8),t.NdJ("click",function(){return n.applyOpenApiKey("create")}),t._uU(15),t.ALo(16,"translate"),t.qZA()()(),t._UZ(17,"hr"),t.YNc(18,lt,6,5,"p-table",9),t._UZ(19,"br"),t.TgZ(20,"div",6)(21,"div",7)(22,"button",10),t.NdJ("click",function(){return n.changePage("queryClientList",!1)}),t._uU(23),t.ALo(24,"translate"),t.qZA()()()()(),t.TgZ(25,"div",1)(26,"div",11),t.YNc(27,xt,96,46,"form",12),t.qZA(),t._UZ(28,"br"),t.TgZ(29,"div",13)(30,"div",7)(31,"button",10),t.NdJ("click",function(){return n.changePage("viewClientOpenApiList",!1)}),t._uU(32),t.ALo(33,"translate"),t.qZA()()()(),t.YNc(34,vt,8,4,"div",12),t.qZA(),t._UZ(35,"p-toast",14)),2&e&&(t.Q6J("title",n.currentTitle)("isDefault",1==n.pageNum),t.xp6(1),t.Q6J("hidden",1!=n.pageNum),t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(2),t.cQ8("placeholder","",t.lcZ(5,21,"client_id"),"\u3001",t.lcZ(6,23,"client_name"),"\u3001",t.lcZ(7,25,"client_alias"),""),t.Q6J("control",n.form.get("keyword"))("searchFn",n.queryClientList.bind(n)),t.xp6(5),t.Q6J("ngIf",n.clientListCols),t.xp6(1),t.Q6J("hidden",2!=n.pageNum),t.xp6(4),t.Q6J("disabled",0==n.canCreate),t.xp6(1),t.Oqu(t.lcZ(16,27,"button.apply")),t.xp6(3),t.Q6J("ngIf",n.openApiKeyListCols),t.xp6(5),t.Oqu(t.lcZ(24,29,"button.return_to_list")),t.xp6(2),t.Q6J("hidden",3!=n.pageNum),t.xp6(2),t.Q6J("ngIf",n.openApiKeyDetailData),t.xp6(5),t.Oqu(t.lcZ(33,31,"button.return_to_list")),t.xp6(2),t.Q6J("ngIf",4==n.pageNum),t.xp6(1),t.Akn(t.DdM(33,Nt)))},directives:[D.e,_._Y,_.JL,_.sg,q.J,s.O5,k.iA,T.jx,s.sg,O.Hq,U.u,_.F,R.V,F.FN],pipes:[I.X$,s.Nd],styles:[""]}),i})(),canActivate:[h.u6]}];let Ct=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[r.Bz.forChild(Lt)],r.Bz]}),i})(),wt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[h.u6],imports:[[s.ez,Ct,m.W,f.m,_.UX,_.u5]]}),i})()}}]);