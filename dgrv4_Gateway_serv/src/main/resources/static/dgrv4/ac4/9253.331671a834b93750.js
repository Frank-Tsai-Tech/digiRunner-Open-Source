"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[9253],{29253:(A,v,n)=>{n.r(v),n.d(v,{Lb0010Module:()=>k});var i=n(99291),h=n(86347),y=n(15861),b=n(14525),l=n(93075),f=n(59783),t=n(87587),a=n(56435),o=n(4516),u=n(71330),c=n(41313),L=n(86518),Z=n(38441),R=n(63710),T=n(49603),C=n(69808),B=n(4119);let q=(()=>{class s{constructor(e){this.fb=e,this.disabled=!1,this.change=new t.vpe,this.remove=new t.vpe}ngOnInit(){this.form=this.fb.group({id:new l.NI({value:this.data?this.data.id:"",disabled:!0}),rule:new l.NI(this.data?this.data.rule:"")}),this.form.valueChanges.subscribe(()=>{const e=this.form.getRawValue();this.change.emit({id:e.id,rule:e.rule,no:this.no})})}delete(e){this._ref.destroy(),this.remove.emit(this.no)}get id(){return this.form.get("id")}get rule(){return this.form.get("rule")}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(l.qu))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-white-list-detail"]],inputs:{data:"data",_ref:"_ref",no:"no",disabled:"disabled"},outputs:{change:"change",remove:"remove"},decls:7,vars:1,consts:[[1,"form-group","field-flex-start",3,"formGroup"],[1,"col-4","px-0"],["type","text","formControlName","id",1,"form-control"],[1,"col-6","px-0"],["type","text","formControlName","rule",1,"form-control"],["type","button",1,"btn","tpi-primary","ms-1",2,"border-radius","50%",3,"click"],[1,"fa","fa-minus"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"input",2),t.qZA(),t.TgZ(3,"div",3),t._UZ(4,"input",4),t.qZA(),t.TgZ(5,"button",5),t.NdJ("click",function(p){return r.delete(p)}),t._UZ(6,"i",6),t.qZA()()),2&e&&t.Q6J("formGroup",r.form)},directives:[l.JL,l.sg,l.Fj,l.JJ,l.u],styles:[""]}),s})();var D=n(51062);const P=["whitelistDetail"];function O(s,m){}let N=(()=>{class s{constructor(e){this.toolService=e,this._disabled=!1,this._whiteList=[],this.hostnums=0}ngOnInit(){}writeValue(e){this.whitelistDetailRef.clear(),this._whiteList=[],this.hostnums=0,e&&e.length>0&&e.forEach(r=>{this.addWhitelistItem(r)})}addWhitelistItem(e){let r=this.whitelistDetailRef.createComponent(q);this._whiteList.push(e?{id:e.id,rule:e.rule,no:this.hostnums}:{id:"",rule:"",no:this.hostnums}),r.instance._ref=r,r.instance.no=this.hostnums,r.instance.data=this._whiteList[this.hostnums],this.hostnums++,r.instance.change.subscribe(d=>{const p=this._whiteList.findIndex(g=>g.no===d.no);p||0!=this._whiteList.length?(this._whiteList[p].no=d.no,this._whiteList[p].id=d.id,this._whiteList[p].rule=d.rule):this._whiteList.push({id:"",rule:"",no:this.hostnums}),this.onChange(this._whiteList.map(g=>({id:g.id,rule:g.rule})))}),r.instance.remove.subscribe(d=>{const p=this._whiteList.findIndex(g=>g.no===d);this._whiteList.splice(p,1),0==this._whiteList.length?(this.hostnums=0,this.onChange(null)):this.onChange(this._whiteList.map(g=>({id:g.id,rule:g.rule})))})}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(o.g))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-white-list-form"]],viewQuery:function(e,r){if(1&e&&t.Gf(P,7,t.s_b),2&e){let d;t.iGM(d=t.CRH())&&(r.whitelistDetailRef=d.first)}},inputs:{_disabled:"_disabled"},features:[t._Bn([{provide:l.JU,useExisting:(0,t.Gpc)(()=>s),multi:!0}])],decls:15,vars:3,consts:[[1,"whitelist"],["content",""],[1,"col-12","px-0"],[1,"form-group","field-flex-start"],[1,"col-4","px-0"],[1,"form-control","border-bottomline"],[1,"col-6","px-0"],[1,"form-control","border-bottomline","control-label","required",2,"font-weight","bold"],["whitelistDetail",""],["type","button",1,"btn","tpi-second",2,"border-radius","50%",3,"click"],[1,"fa","fa-plus"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t._uU(6,"ID"),t.qZA()(),t.TgZ(7,"div",6)(8,"label",7),t._uU(9),t.ALo(10,"translate"),t.qZA()()(),t.YNc(11,O,0,0,"ng-template",null,8,t.W1O),t.TgZ(13,"button",9),t.NdJ("click",function(){return r.addWhitelistItem()}),t._UZ(14,"i",10),t.qZA()()()),2&e&&(t.xp6(9),t.Oqu(t.lcZ(10,1,"rule")))},pipes:[D.X$],styles:[".whitelist[_ngcontent-%COMP%]{background:#ffffff;border-radius:.5rem;border:1px solid #c8c8c8;padding:.5rem}"]}),s})();var S=n(17773),U=n(19114),w=n(40845);function H(s,m){if(1&s&&(t.TgZ(0,"div",20)(1,"small",21),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"small",21),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&s){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,null==e.status?null:e.status.errors.pattern)),t.xp6(3),t.Oqu(t.lcZ(6,4,null==e.status?null:e.status.errors.isRequired))}}const M=function(){return{backgroundColor:"var(--red-300)","border-color":"var(--red-300)"}};function I(s,m){if(1&s){const e=t.EpF();t.TgZ(0,"div",22)(1,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(32).accept()}),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(32).reject()}),t.ALo(4,"translate"),t.qZA()()}2&s&&(t.xp6(1),t.s9C("label",t.lcZ(2,3,"button.confirm")),t.Q6J("ngStyle",t.DdM(7,M)),t.xp6(2),t.s9C("label",t.lcZ(4,5,"button.cancel")))}const E=function(){return{marginTop:"60px"}},W=function(){return{width:"50vw"}},Y=[{path:"",component:(()=>{class s extends b.H{constructor(e,r,d,p,g,x,_,G,$,j){super(e,r),this.fb=d,this.toolService=p,this.openApiService=g,this.messageService=x,this.confirmationService=_,this.serverService=G,this.alertService=$,this.ngxSrvice=j,this.currentTitle=this.title,this.currentAction="",this.form=this.fb.group({status:new l.NI(""),dataList:new l.NI([])})}ngOnInit(){this.serverService.createAndUpdateBotDetectionList_before().subscribe(e=>{this.toolService.checkDpSuccess(e.ResHeader)&&(this.addFormValidator(this.form,e.RespBody.constraints),this.status.markAsTouched())}),this.axios_queryBotDetectionList()}axios_queryBotDetectionList(){this.serverService.queryBotDetectionList().subscribe(e=>{this.toolService.checkDpSuccess(e.ResHeader)?(this.status.setValue(e.RespBody.status),this.dataList.setValue(e.RespBody.dataList)):(this.status.setValue(""),this.dataList.setValue([]))})}update(){var e=this;let r=null;this.dataList.value&&this.dataList.value.length>0&&(r=this.dataList.value.filter(p=>!(""===p.id&&""===p.rule)).map(p=>({id:p.id,rule:p.rule})));let d={status:this.status.value,whitelistDataList:r};this.ngxSrvice.start(),this.serverService.createAndUpdateBotDetectionList(d).subscribe(function(){var p=(0,y.Z)(function*(g){if(e.toolService.checkDpSuccess(g.ResHeader)){const x=["message.update","message.success"],_=yield e.toolService.getDict(x);e.messageService.add({severity:"success",summary:`${_["message.update"]}`,detail:`${_["message.update"]} ${_["message.success"]}!`}),e.axios_queryBotDetectionList()}e.ngxSrvice.stop()});return function(g){return p.apply(this,arguments)}}())}get status(){return this.form.get("status")}get dataList(){return this.form.get("dataList")}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(i.gz),t.Y36(a.W),t.Y36(l.qu),t.Y36(o.g),t.Y36(u.l),t.Y36(f.ez),t.Y36(f.YP),t.Y36(c.N),t.Y36(L.c),t.Y36(Z.LA))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-lb0010"]],features:[t._Bn([f.ez,f.YP]),t.qOj],decls:34,vars:17,consts:[[3,"title"],[3,"formGroup"],[1,"form-group","row"],[1,"col-3"],["id","status_label",1,"control-label"],[1,"p-form-check-line"],[1,"p-form-check"],["formControlName","status","value","Y","inputId","statusY"],["for","statusY",1,"ms-2","mb-0"],["formControlName","status","value","N","inputId","statusN"],["for","statusN",1,"ms-2","mb-0"],["class","text-danger",4,"ngIf"],[1,"col-12"],[1,"far","fa-question-circle","ms-2",3,"pTooltip","escape"],["formControlName","dataList"],["type","button",1,"btn","tpi-btn","tpi-primary","float-start","me-2",3,"disabled","click"],["position","top-left"],["icon","pi pi-exclamation-triangle","styleClass","cHeader cContent cIcon"],["cd",""],["pTemplate","footer"],[1,"text-danger"],[1,"form-text"],[1,"row",2,"justify-content","center"],["type","button","pButton","","icon","pi pi-check",3,"ngStyle","label","click"],["type","button","pButton","","icon","pi pi-times",1,"p-button-secondary",3,"label","click"]],template:function(e,r){1&e&&(t.TgZ(0,"app-container",0)(1,"div")(2,"form",1)(3,"div",2)(4,"div",3)(5,"label",4),t._uU(6,"Enable"),t.qZA(),t.TgZ(7,"div",5),t.ynx(8),t.TgZ(9,"div",6),t._UZ(10,"p-radioButton",7),t.TgZ(11,"label",8),t._uU(12,"Y"),t.qZA()(),t.TgZ(13,"div",6),t._UZ(14,"p-radioButton",9),t.TgZ(15,"label",10),t._uU(16,"N"),t.qZA()(),t.BQk(),t.qZA(),t.YNc(17,H,7,6,"div",11),t.qZA()(),t.TgZ(18,"div",2)(19,"div",12)(20,"label",4),t._uU(21,"Allow List"),t.qZA(),t._UZ(22,"i",13),t.ALo(23,"translate"),t._UZ(24,"app-white-list-form",14),t.qZA()(),t.TgZ(25,"div",2)(26,"div",12)(27,"button",15),t.NdJ("click",function(){return r.update()}),t._uU(28),t.ALo(29,"translate"),t.qZA()()()()()(),t._UZ(30,"p-toast",16),t.TgZ(31,"p-confirmDialog",17,18),t.YNc(33,I,5,8,"ng-template",19),t.qZA()),2&e&&(t.Q6J("title",r.currentTitle),t.xp6(2),t.Q6J("formGroup",r.form),t.xp6(15),t.Q6J("ngIf",(null==r.status?null:r.status.invalid)&&((null==r.status?null:r.status.dirty)||(null==r.status?null:r.status.touched))),t.xp6(5),t.s9C("pTooltip",t.lcZ(23,11,"allowlist_rule_tip")),t.Q6J("escape",!1),t.xp6(5),t.Q6J("disabled",!r.form.valid),t.xp6(1),t.Oqu(t.lcZ(29,13,"button.update")),t.xp6(2),t.Akn(t.DdM(15,E)),t.xp6(1),t.Akn(t.DdM(16,W)))},directives:[R.e,l._Y,l.JL,l.sg,T.EU,l.JJ,l.u,C.O5,B.u,N,S.FN,U.Q,f.jx,w.Hq,C.PC],pipes:[D.X$],styles:[""]}),s})(),canActivate:[h.u6]}];let J=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[i.Bz.forChild(Y)],i.Bz]}),s})();var K=n(78555),F=n(31890);let k=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({providers:[h.u6],imports:[[C.ez,J,K.W,F.m,h.DL,l.UX,l.u5]]}),s})()},63710:(A,v,n)=>{n.d(v,{e:()=>a});var i=n(87587),h=n(69808),y=n(51062);function b(o,u){if(1&o&&(i.TgZ(0,"div")(1,"h3",9),i._uU(2),i.ALo(3,"translate"),i.qZA()()),2&o){const c=i.oxw();i.xp6(2),i.Oqu(i.lcZ(3,1,c.title))}}function l(o,u){if(1&o){const c=i.EpF();i.TgZ(0,"div",10)(1,"button",11),i.NdJ("click",function(){return i.CHM(c),i.oxw().return()}),i._UZ(2,"i",12),i._uU(3),i.ALo(4,"translate"),i.qZA(),i.TgZ(5,"span",13),i._uU(6),i.qZA(),i.TgZ(7,"span",14),i._uU(8),i.qZA()()}if(2&o){const c=i.oxw();i.xp6(3),i.hij(" ",i.lcZ(4,3,"button.return_to_list")," "),i.xp6(3),i.hij("",c.getHead()," /"),i.xp6(2),i.Oqu(c.getTail())}}const f=[[["","center-view","center"]],"*"],t=["[center-view=center]","*"];let a=(()=>{class o{constructor(){this.title="",this.isDefault=!0,this.headerReturn=new i.vpe}ngOnInit(){}return(){this.headerReturn.emit(null)}getHead(){const c=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return c.pop(),c.join(" / ")}getTail(){const c=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return c[c.length-1]}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-container"]],inputs:{title:"title",isDefault:"isDefault"},outputs:{headerReturn:"headerReturn"},ngContentSelectors:t,decls:11,vars:2,consts:[[1,"container-fluid","h-100"],[1,"row","position-relative",2,"height","calc(100% - 40px - 0.5rem)"],[1,"col"],[2,"margin-bottom","0.5rem"],[4,"ngIf"],["style","text-align: right",4,"ngIf"],[1,"col","d-flex","justify-content-center"],[1,"my-0","mb-2"],[1,"p-2"],["id","content",1,"page-title"],[2,"text-align","right"],["type","button","icon","",1,"btn","float-start","tpi-header-return",3,"click"],[1,"fas","fa-arrow-left",2,"margin-right","5px"],[1,"mb-0",2,"font-size","0.8rem","color","#666464"],[1,"mb-0",2,"font-size","0.8rem","color","#ff6e38","font-weight","bold"]],template:function(c,L){1&c&&(i.F$t(f),i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i.YNc(4,b,4,3,"div",4),i.YNc(5,l,9,5,"div",5),i.TgZ(6,"div",6),i.Hsn(7),i.qZA()(),i._UZ(8,"hr",7),i.Hsn(9,1),i._UZ(10,"div",8),i.qZA()()()),2&c&&(i.xp6(4),i.Q6J("ngIf",L.isDefault),i.xp6(1),i.Q6J("ngIf",!L.isDefault))},directives:[h.O5],pipes:[y.X$],styles:[".card.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:400;color:#5a5541}"]}),o})()},86347:(A,v,n)=>{n.d(v,{DL:()=>i.D,u6:()=>y.u});var i=n(81233),y=(n(45240),n(92718));n(4516)},71330:(A,v,n)=>{n.d(v,{l:()=>l});var i=n(92340),h=n(57553),y=n(87587),b=n(30424);let l=(()=>{class f{constructor(a){this.api=a,this.api.baseUrl=i.N.dpPath}get basePath(){return i.N.isv4?"dgrv4/11":"tsmpdpaa/11"}queryOpenApiKeyByClientId(a){let o={ReqHeader:this.api.getReqHeader(h.Nx.queryOpenApiKeyByClientId),ReqBody:a};return this.api.npPost(`${this.basePath}/DPB0090`,o)}queryOpenApiKeyDetailByPk(a){let o={ReqHeader:this.api.getReqHeader(h.Nx.queryOpenApiKeyDetailByPk),ReqBody:a};return this.api.npPost(`${this.basePath}/DPB0091`,o)}writeOpenApiKeyReq(a){let o={ReqHeader:this.api.getReqHeader(h.Nx.writeOpenApiKeyReq),ReqBody:a};return this.api.npPost(`${this.basePath}/DPB0092`,o)}queryApiLikeList(a){let o={ReqHeader:this.api.getReqHeader(h.Nx.queryApiLikeList),ReqBody:a};return this.api.npPost(`${this.basePath}/DPB0093`,o)}queryOpenApiKeyByDateAndLike_before(){let a={ReqHeader:this.api.getReqHeader(h.Nx.queryOpenApiKeyByDateAndLike),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0094?before`,a)}queryOpenApiKeyByDateAndLike_ignore1298(a){let o={ReqHeader:this.api.getReqHeader(h.Nx.queryOpenApiKeyByDateAndLike),ReqBody:a};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0094`,o)}queryOpenApiKeyByDateAndLike(a){let o={ReqHeader:this.api.getReqHeader(h.Nx.queryOpenApiKeyByDateAndLike),ReqBody:a};return this.api.npPost(`${this.basePath}/DPB0094`,o)}queryClientListByRegStatusLike_ignore1298(a){let o={ReqHeader:this.api.getReqHeader(h.Nx.queryClientListByRegStatusLike),ReqBody:a};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0095`,o)}queryClientListByRegStatusLike(a){let o={ReqHeader:this.api.getReqHeader(h.Nx.queryClientListByRegStatusLike),ReqBody:a};return this.api.npPost(`${this.basePath}/DPB0095`,o)}}return f.\u0275fac=function(a){return new(a||f)(y.LFG(b.K))},f.\u0275prov=y.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()}}]);