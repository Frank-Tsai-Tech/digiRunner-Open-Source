"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[6923],{56923:(nt,m,a)=>{a.r(m),a.d(m,{Np0204Module:()=>et});var _=a(69808),T=a(78555),N=a(24783),l=a(93075),g=a(86347),u=a(99291),h=a(15861),x=a(14525),C=a(57553),f=a(78165),t=a(87587),y=a(56435),A=a(45682),L=a(41454),Z=a(63710),v=a(23099),b=a(59783),w=a(40845),I=a(4119),D=a(5437),E=a(86561),J=a(17773),Q=a(51062);const Y=["dialog"];function B(n,i){1&n&&t._UZ(0,"col"),2&n&&t.Udp("width",i.$implicit.width)}function R(n,i){if(1&n&&(t.TgZ(0,"colgroup"),t.YNc(1,B,1,2,"col",19),t.qZA(),t.TgZ(2,"colgroup",20),t._uU(3),t.ALo(4,"translate"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(2),t.Oqu(t.lcZ(4,2,"action"))}}function U(n,i){if(1&n&&(t.TgZ(0,"th",23),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.header," ")}}function k(n,i){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,U,2,1,"th",21),t.TgZ(2,"th",22),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(2),t.hij("",t.lcZ(4,2,"action")," ")}}function F(n,i){if(1&n&&(t.TgZ(0,"td")(1,"span"),t._uU(2),t.qZA()()),2&n){const e=i.$implicit,o=t.oxw().$implicit;t.Udp("width",e.width),t.xp6(2),t.hij(" ",o[e.field]," ")}}function H(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr"),t.YNc(1,F,3,3,"td",19),t.TgZ(2,"td",24)(3,"button",25),t.NdJ("click",function(){const r=t.CHM(e).$implicit,p=t.oxw(3);return p.showDialog(r,p.formOperate.detail)}),t.ALo(4,"translate"),t.qZA()()()}if(2&n){const e=i.columns;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(2),t.Q6J("pTooltip",t.lcZ(4,2,"button.detail"))}}function M(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",26)(2,"span",27),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).moreData()}),t._uU(6),t.ALo(7,"translate"),t._UZ(8,"i",29),t.qZA()()()}if(2&n){const e=t.oxw().$implicit,o=t.oxw(3);t.xp6(1),t.uIk("colspan",e.length+1),t.xp6(2),t.AsE("",t.lcZ(4,4,"row_count"),": ",o.rowcount,""),t.xp6(3),t.hij("",t.lcZ(7,6,"button.more")," ")}}function O(n,i){if(1&n&&t.YNc(0,M,9,8,"tr",1),2&n){const e=t.oxw(3);t.Q6J("ngIf",e.rowcount)}}function P(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=i.$implicit;t.xp6(1),t.uIk("colspan",e.length+1),t.xp6(1),t.hij(" ",t.lcZ(3,2,"no_rec")," ")}}const $=function(){return{"word-break":"break-word"}};function S(n,i){if(1&n&&(t.TgZ(0,"p-table",13),t.YNc(1,R,5,4,"ng-template",14),t.YNc(2,k,5,4,"ng-template",15),t.YNc(3,H,5,4,"ng-template",16),t.YNc(4,O,1,1,"ng-template",17),t.YNc(5,P,4,4,"ng-template",18),t.qZA()),2&n){const e=t.oxw(2);t.Akn(t.DdM(4,$)),t.Q6J("columns",e.cols)("value",e.dataList)}}function G(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",5),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().submitForm()}),t.TgZ(2,"div",6)(3,"div",7)(4,"label",8),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"input",9),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"div",6)(10,"div",10)(11,"button",11),t._uU(12),t.ALo(13,"translate"),t.qZA()()()(),t._UZ(14,"hr"),t.YNc(15,S,6,5,"p-table",12),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(4),t.Oqu(t.lcZ(6,5,"client_search")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,7,"fuzzy_search")),t.xp6(5),t.Oqu(t.lcZ(13,9,"button.search")),t.xp6(3),t.Q6J("ngIf",e.cols)}}function j(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-client-ca",33),t.NdJ("rowDataHandler",function(c){return t.CHM(e),t.oxw(2).rowDataHandler(c)}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("data",e.clientData)("isCusEnable",e.isCusEnable)}}function q(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,j,1,2,"app-client-ca",30),t.TgZ(2,"div",31)(3,"button",32),t.NdJ("click",function(c){return t.CHM(e),t.oxw().redirectList(c)}),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.clientData),t.xp6(3),t.Oqu(t.lcZ(5,2,"button.return_to_list"))}}function z(n,i){if(1&n&&t._UZ(0,"app-ca-detail",35),2&n){const e=t.oxw(2);t.Q6J("data",e.caData)("center",!1)}}function X(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,z,1,2,"app-ca-detail",34),t.TgZ(2,"div",31)(3,"button",32),t.NdJ("click",function(c){return t.CHM(e),t.oxw().redirectPrev(c)}),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.caData),t.xp6(3),t.Oqu(t.lcZ(5,2,"button.return"))}}const W=function(){return{marginTop:"60px"}};let K=(()=>{class n extends x.H{constructor(e,o,c,r,p,d){super(e,o),this.fb=c,this.tool=r,this.clientCA=p,this.clientService=d,this.dialogTitle="",this.cols=[],this.dataList=new Array,this.rowcount=0,this.formOperate=C.mi,this.emPageBlock=s,this.pageNum=s.QUERYPAGE,this.cusTitle=[],this.currentTitle=this.title,this.isCusEnable="N",this.form=this.fb.group({keyword:new l.NI("")})}ngOnInit(){this.init()}init(){var e=this;return(0,h.Z)(function*(){const c=yield e.tool.getDict(["client_id","client_name","client_alias","client_cert_list","cert_detail"]);e.cusTitle=[e.currentTitle,`${e.currentTitle} > ${c.client_cert_list}`,`${e.currentTitle} > ${c.client_cert_list} > ${c.cert_detail}`],e.cols=[{field:"clientId",header:c.client_id},{field:"clientName",header:c.client_name},{field:"clientAlias",header:c.client_alias}],e.dataList=[],e.rowcount=e.dataList.length,e.clientService.queryClientListByLike_ignore1298({keyword:e.keyword.value}).subscribe(p=>{e.tool.checkDpSuccess(p.ResHeader)&&(e.dataList=p.RespBody.dataList,e.rowcount=e.dataList.length)})})()}submitForm(){this.dataList=[],this.rowcount=this.dataList.length,this.clientService.queryClientListByLike({keyword:this.keyword.value}).subscribe(o=>{this.tool.checkDpSuccess(o.ResHeader)&&(this.dataList=o.RespBody.dataList,this.rowcount=this.dataList.length)})}showDialog(e){var o=this;return(0,h.Z)(function*(){yield o.tool.getDict(["client_cert_list"]);let p={clientId:e.clientId,encodeCertType:o.tool.Base64Encoder(o.tool.BcryptEncoder("TLS"))+",1"};o.pageNum=o.emPageBlock.CLIENT_DETAIL,o.currentTitle=o.cusTitle[o.pageNum],o.clientData={data:{type:"TLS",clientId:e.clientId,rowData:e,ReqBody:p},displayInDialog:!0}})()}redirectPrev(){this.pageNum=this.emPageBlock.CLIENT_DETAIL,this.currentTitle=this.cusTitle[this.pageNum]}redirectList(){this.pageNum=this.emPageBlock.QUERYPAGE,this.currentTitle=this.cusTitle[this.pageNum]}headerReturn(){this.pageNum===s.CLIENT_DETAIL?this.redirectList():this.pageNum===s.CA_DETAIL&&this.redirectPrev()}rowDataHandler(e){this.pageNum=this.emPageBlock.CA_DETAIL,this.currentTitle=this.cusTitle[this.pageNum],this.caData=e}moreData(){this.clientService.queryClientListByLike({clientId:this.dataList[this.dataList.length-1].clientId,keyword:this.keyword.value}).subscribe(o=>{this.tool.checkDpSuccess(o.ResHeader)&&(this.dataList=this.dataList.concat(o.RespBody.dataList),this.rowcount=this.dataList.length)})}get keyword(){return this.form.get("keyword")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.gz),t.Y36(y.W),t.Y36(l.qu),t.Y36(A.g),t.Y36(L.p),t.Y36(f.y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-np0204"]],viewQuery:function(e,o){if(1&e&&t.Gf(Y,5),2&e){let c;t.iGM(c=t.CRH())&&(o._dialog=c.first)}},features:[t._Bn([f.y]),t.qOj],decls:7,vars:10,consts:[[3,"title","isDefault","headerReturn"],[4,"ngIf"],[3,"title","width"],["dialog",""],["position","top-left"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"col-4","col-xl-4","col-lg-4"],["for","keyword",1,"control-label"],["type","text","id","keyword","formControlName","keyword",1,"form-control",3,"placeholder"],[1,"col-3","col-xl-3","col-lg-3"],["type","submit",1,"btn","tpi-btn","tpi-primary","float-left","mr-3"],["selectionMode","single","styleClass","p-datatable-striped",3,"columns","value","style",4,"ngIf"],["selectionMode","single","styleClass","p-datatable-striped",3,"columns","value"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],[3,"width",4,"ngFor","ngForOf"],[2,"width","80px"],["scope","col",4,"ngFor","ngForOf"],["scope","col",2,"width","80px"],["scope","col"],[2,"text-align","center","width","80px"],["pButton","","pRipple","","type","button","icon","pi pi-eye","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-plain",3,"pTooltip","click"],[2,"color","#b7b7b7"],[2,"vertical-align","middle"],["type","button",1,"btn","tpi-header-return",3,"click"],[1,"fas","fa-angle-double-right",2,"margin-left","5px"],[3,"data","isCusEnable","rowDataHandler",4,"ngIf"],[1,"text-left"],["type","button",1,"btn","tpi-btn","tpi-primary",3,"click"],[3,"data","isCusEnable","rowDataHandler"],[3,"data","center",4,"ngIf"],[3,"data","center"]],template:function(e,o){1&e&&(t.TgZ(0,"app-container",0),t.NdJ("headerReturn",function(){return o.headerReturn()}),t.YNc(1,G,16,11,"ng-container",1),t.YNc(2,q,6,4,"ng-container",1),t.YNc(3,X,6,4,"ng-container",1),t.qZA(),t._UZ(4,"app-dialog",2,3)(6,"p-toast",4)),2&e&&(t.Q6J("title",o.currentTitle)("isDefault",o.pageNum==o.emPageBlock.QUERYPAGE),t.xp6(1),t.Q6J("ngIf",o.pageNum===o.emPageBlock.QUERYPAGE),t.xp6(1),t.Q6J("ngIf",o.pageNum===o.emPageBlock.CLIENT_DETAIL),t.xp6(1),t.Q6J("ngIf",o.pageNum===o.emPageBlock.CA_DETAIL),t.xp6(1),t.Q6J("title",o.dialogTitle)("width",800),t.xp6(2),t.Akn(t.DdM(9,W)))},directives:[Z.e,_.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,v.iA,b.jx,_.sg,w.Hq,I.u,D.D,E.a,J.FN],pipes:[Q.X$],styles:[""]}),n})();var s=(()=>{return(n=s||(s={}))[n.QUERYPAGE=0]="QUERYPAGE",n[n.CLIENT_DETAIL=1]="CLIENT_DETAIL",n[n.CA_DETAIL=2]="CA_DETAIL",s;var n})();const V=[{path:"",component:K,canActivate:[g.u6]}];let tt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.Bz.forChild(V)],u.Bz]}),n})(),et=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[g.u6],imports:[[_.ez,tt,T.W,N.m,l.UX,l.u5]]}),n})()}}]);