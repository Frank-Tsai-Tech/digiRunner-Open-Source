"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[8205],{63710:(L,g,l)=>{l.d(g,{e:()=>i});var o=l(87587),e=l(69808),R=l(51062);function u(t,n){if(1&t&&(o.TgZ(0,"div")(1,"h3",9),o._uU(2),o.ALo(3,"translate"),o.qZA()()),2&t){const c=o.oxw();o.xp6(2),o.Oqu(o.lcZ(3,1,c.title))}}function m(t,n){if(1&t){const c=o.EpF();o.TgZ(0,"div",10)(1,"button",11),o.NdJ("click",function(){return o.CHM(c),o.oxw().return()}),o._UZ(2,"i",12),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.TgZ(5,"span",13),o._uU(6),o.qZA(),o.TgZ(7,"span",14),o._uU(8),o.qZA()()}if(2&t){const c=o.oxw();o.xp6(3),o.hij(" ",o.lcZ(4,3,"button.return_to_list")," "),o.xp6(3),o.hij("",c.getHead()," /"),o.xp6(2),o.Oqu(c.getTail())}}const d=[[["","center-view","center"]],"*"],v=["[center-view=center]","*"];let i=(()=>{class t{constructor(){this.title="",this.isDefault=!0,this.headerReturn=new o.vpe}ngOnInit(){}return(){this.headerReturn.emit(null)}getHead(){const c=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return c.pop(),c.join(" / ")}getTail(){const c=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return c[c.length-1]}}return t.\u0275fac=function(c){return new(c||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-container"]],inputs:{title:"title",isDefault:"isDefault"},outputs:{headerReturn:"headerReturn"},ngContentSelectors:v,decls:11,vars:2,consts:[[1,"container-fluid","h-100"],[1,"row","position-relative",2,"height","calc(100% - 40px - 0.5rem)"],[1,"col"],[2,"margin-bottom","0.5rem"],[4,"ngIf"],["style","text-align: right",4,"ngIf"],[1,"col","d-flex","justify-content-center"],[1,"my-0","mb-2"],[1,"p-2"],["id","content",1,"page-title"],[2,"text-align","right"],["type","button","icon","",1,"btn","float-start","tpi-header-return",3,"click"],[1,"fas","fa-arrow-left",2,"margin-right","5px"],[1,"mb-0",2,"font-size","0.8rem","color","#666464"],[1,"mb-0",2,"font-size","0.8rem","color","#ff6e38","font-weight","bold"]],template:function(c,f){1&c&&(o.F$t(d),o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),o.YNc(4,u,4,3,"div",4),o.YNc(5,m,9,5,"div",5),o.TgZ(6,"div",6),o.Hsn(7),o.qZA()(),o._UZ(8,"hr",7),o.Hsn(9,1),o._UZ(10,"div",8),o.qZA()()()),2&c&&(o.xp6(4),o.Q6J("ngIf",f.isDefault),o.xp6(1),o.Q6J("ngIf",!f.isDefault))},directives:[e.O5],pipes:[R.X$],styles:[".card.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:400;color:#5a5541}"]}),t})()},92718:(L,g,l)=>{l.d(g,{u:()=>n});var o=l(54004),e=l(70262),R=l(62843),u=l(87587),m=l(45682),d=l(89709),v=l(99291),i=l(3937),t=l(60991);let n=(()=>{class c{constructor(h,y,b,P,A){this.toolService=h,this.tokenService=y,this.router=b,this.ngxService=P,this.logoutService=A}canActivate(){return this.ngxService.stopAll(),!this.toolService.isTokenExpired()||this.toolService.refreshToken().pipe((0,o.U)(h=>!!h.access_token),(0,e.K)(this.handleError.bind(this)))}handleError(h){return setTimeout(()=>this.logoutService.logout()),(0,R._)(()=>h)}}return c.\u0275fac=function(h){return new(h||c)(u.LFG(m.g),u.LFG(d.B),u.LFG(v.F0),u.LFG(i.LA),u.LFG(t.P))},c.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac}),c})()},86347:(L,g,l)=>{l.d(g,{DL:()=>o.D,u6:()=>R.u});var o=l(81233),R=(l(45240),l(92718));l(45682)},1666:(L,g,l)=>{l.d(g,{j:()=>Z});var o=l(15861),e=l(87587),R=l(45682),u=l(1955),m=l(45330),d=l(93075),v=l(40845),i=l(69808),t=l(23099),n=l(59783),c=l(51062);function f(r,_){1&r&&e._UZ(0,"col"),2&r&&e.Udp("width",_.$implicit.width)}function h(r,_){if(1&r&&(e.TgZ(0,"colgroup"),e._UZ(1,"col",16),e.YNc(2,f,1,2,"col",17),e.qZA()),2&r){const a=_.$implicit;e.xp6(2),e.Q6J("ngForOf",a)}}function y(r,_){1&r&&e._UZ(0,"p-tableHeaderCheckbox")}function b(r,_){if(1&r&&(e.TgZ(0,"th",21),e._uU(1),e.qZA()),2&r){const a=_.$implicit;e.Udp("width",a.width),e.xp6(1),e.hij(" ",a.header," ")}}function P(r,_){if(1&r&&(e.TgZ(0,"tr")(1,"th",18),e.YNc(2,y,1,0,"p-tableHeaderCheckbox",19),e.qZA(),e.YNc(3,b,2,3,"th",20),e.qZA()),2&r){const a=_.$implicit,s=e.oxw(2);e.xp6(2),e.Q6J("ngIf","multiple"==s.config.data.selectionMode),e.xp6(1),e.Q6J("ngForOf",a)}}function A(r,_){if(1&r&&e._UZ(0,"p-tableCheckbox",23),2&r){const a=e.oxw().$implicit;e.Q6J("value",a)}}function x(r,_){if(1&r&&e._UZ(0,"p-tableRadioButton",23),2&r){const a=e.oxw().$implicit;e.Q6J("value",a)}}function M(r,_){if(1&r&&(e.TgZ(0,"td")(1,"span"),e._uU(2),e.qZA()()),2&r){const a=_.$implicit,s=e.oxw().$implicit;e.Udp("width",a.width),e.xp6(2),e.hij(" ",s[a.field]," ")}}function D(r,_){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e.YNc(2,A,1,1,"p-tableCheckbox",22),e.YNc(3,x,1,1,"p-tableRadioButton",22),e.qZA(),e.YNc(4,M,3,3,"td",17),e.qZA()),2&r){const a=_.columns,s=e.oxw(2);e.xp6(2),e.Q6J("ngIf","multiple"==s.config.data.selectionMode),e.xp6(1),e.Q6J("ngIf","single"==s.config.data.selectionMode),e.xp6(1),e.Q6J("ngForOf",a)}}function E(r,_){if(1&r){const a=e.EpF();e.TgZ(0,"tr")(1,"td",24)(2,"span",25),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",26),e.NdJ("click",function(){return e.CHM(a),e.oxw(3).moreData()}),e._uU(6),e.ALo(7,"translate"),e._UZ(8,"i",27),e.qZA()()()}if(2&r){const a=e.oxw().$implicit,s=e.oxw(2);e.xp6(1),e.uIk("colspan",a.length+1),e.xp6(2),e.AsE("",e.lcZ(4,4,"row_count"),": ",s.roleDetailList.length,""),e.xp6(3),e.hij(" ",e.lcZ(7,6,"button.more")," ")}}function C(r,_){if(1&r&&e.YNc(0,E,9,8,"tr",19),2&r){const a=e.oxw(2);e.Q6J("ngIf",a.roleDetailList.length>0)}}function q(r,_){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r){const a=_.$implicit;e.xp6(1),e.uIk("colspan",a.length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"no_rec")," ")}}const B=function(){return{"word-break":"break-word"}};function O(r,_){if(1&r){const a=e.EpF();e.TgZ(0,"p-table",10),e.NdJ("selectionChange",function(p){return e.CHM(a),e.oxw().selected=p}),e.YNc(1,h,3,1,"ng-template",11),e.YNc(2,P,4,2,"ng-template",12),e.YNc(3,D,5,3,"ng-template",13),e.YNc(4,C,1,1,"ng-template",14),e.YNc(5,q,4,4,"ng-template",15),e.qZA()}if(2&r){const a=e.oxw();e.Akn(e.DdM(5,B)),e.Q6J("columns",a.cols)("value",a.roleDetailList)("selection",a.selected)}}let Z=(()=>{class r{constructor(a,s,p,T){this.tool=a,this.roleService=s,this.ref=p,this.config=T,this.cols=[],this.roleDetailList=new Array,this.keyword=""}ngOnInit(){this.init()}init(){var a=this;return(0,o.Z)(function*(){const p=yield a.tool.getDict(["role_id","role_name","role_desc"]);a.cols=[{field:"roleId",header:p.role_id},{field:"roleName",header:p.role_name},{field:"roleAlias",header:p.role_desc}],a.searchRoleDetailList("init")})()}searchRoleDetailList(a){if("search"!==a||this.keyword.trim()){switch(this.roleDetailList=[],this.config.data.selectionMode){case"multiple":this.selected=new Array;break;case"single":this.selected={}}this.roleService.queryRoleRoleList({keyword:this.keyword}).subscribe(p=>{this.tool.checkDpSuccess(p.ResHeader)&&(this.roleDetailList=p.RespBody.roleRoleMappingList)})}}moreData(){this.roleService.queryRoleRoleList({roleId:this.roleDetailList[this.roleDetailList.length-1].roleId,keyword:this.keyword}).subscribe(s=>{this.tool.checkDpSuccess(s.ResHeader)&&(this.roleDetailList=this.roleDetailList.concat(s.RespBody.roleRoleMappingList))})}chooseRole(){this.ref.close(this.selected)}cancelRole(){this.ref.close(null)}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(R.g),e.Y36(u.N),e.Y36(m.E7),e.Y36(m.S))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-role-list-lov"]],inputs:{data:"data",close:"close"},decls:17,vars:12,consts:[[1,"container","py-1"],[1,"row"],[1,"col-12","col-sm-12"],[1,"ui-inputgroup"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["pButton","","type","button","icon","pi pi-search",1,"ms-1","tpi-night",3,"click"],["styleClass","p-datatable-striped","responsiveLayout","scroll",3,"columns","value","selection","style","selectionChange",4,"ngIf"],[1,"text-center"],["type","button",1,"btn","tpi-btn","tpi-primary","me-3",3,"disabled","click"],["type","button",1,"btn","tpi-btn","tpi-cancel",3,"click"],["styleClass","p-datatable-striped","responsiveLayout","scroll",3,"columns","value","selection","selectionChange"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],[2,"width","2.25em"],[3,"width",4,"ngFor","ngForOf"],["scope","col",2,"width","2.25em"],[4,"ngIf"],["scope","col",3,"width",4,"ngFor","ngForOf"],["scope","col"],[3,"value",4,"ngIf"],[3,"value"],[2,"color","#b7b7b7"],[2,"vertical-align","middle"],["type","button","icon","",1,"btn","tpi-header-return",3,"click"],[1,"fas","fa-angle-double-right",2,"margin-left","5px"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),e.NdJ("ngModelChange",function(T){return s.keyword=T})("keyup.enter",function(){return s.searchRoleDetailList("search")}),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return s.searchRoleDetailList("search")}),e.qZA()()()(),e._UZ(7,"br"),e.YNc(8,O,6,6,"p-table",6),e._UZ(9,"br"),e.TgZ(10,"div",7)(11,"button",8),e.NdJ("click",function(){return s.chooseRole()}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",9),e.NdJ("click",function(){return s.cancelRole()}),e._uU(15),e.ALo(16,"translate"),e.qZA()()()),2&a&&(e.xp6(4),e.s9C("placeholder",e.lcZ(5,6,"keyword_search")),e.Q6J("ngModel",s.keyword),e.xp6(4),e.Q6J("ngIf",s.cols),e.xp6(3),e.Q6J("disabled",0==s.roleDetailList.length),e.xp6(1),e.hij(" ",e.lcZ(13,8,"button.confirm")," "),e.xp6(3),e.hij(" ",e.lcZ(16,10,"button.cancel")," "))},directives:[d.Fj,d.JJ,d.On,v.Hq,i.O5,t.iA,n.jx,i.sg,t.Mo,t.UA,t.GE],pipes:[c.X$],styles:[""]}),r})()},1955:(L,g,l)=>{l.d(g,{N:()=>m});var o=l(92340),e=l(57553),R=l(87587),u=l(96614);let m=(()=>{class d{constructor(i){this.api=i,this.api.baseUrl=o.N.dpPath}get basePath(){return o.N.isv4?"dgrv4/11":"tsmpdpaa/11"}addTRole(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.addTRole),ReqBody:i};return this.api.npPost(`${this.basePath}/AA0011`,t)}updateTRoleFunc(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.updateTRoleFunc),ReqBody:i};return this.api.npPost(`${this.basePath}/AA0013`,t)}deleteTRole(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.deleteTRole),ReqBody:i};return this.api.npPost(`${this.basePath}/AA0014`,t)}addTRoleRoleMap(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.addTRoleRoleMap),ReqBody:i};return this.api.npPost(`${this.basePath}/AA0016`,t)}deleteTRoleRoleMap(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.deleteTRoleRoleMap),ReqBody:i};return this.api.npPost(`${this.basePath}/AA0017`,t)}updateTRoleRoleMap(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.updateTRoleRoleMap),ReqBody:i};return this.api.npPost(`${this.basePath}/AA0018`,t)}queryTRoleList_v3_ignore1298(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.queryTRoleList_v3),ReqBody:i};return this.api.excuteNpPost_ignore1298(`${this.basePath}/AA0020`,t)}queryTRoleList_v3(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.queryTRoleList_v3),ReqBody:i};return this.api.npPost(`${this.basePath}/AA0020`,t)}queryTRoleRoleMapDetail(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.queryTRoleRoleMapDetail),ReqBody:i};return this.api.npPost(`${this.basePath}/AA0021`,t)}queryTRoleRoleMap_ignore1298(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.queryTRoleList_v3),ReqBody:i};return this.api.excuteNpPost_ignore1298(`${this.basePath}/AA0022`,t)}queryTRoleRoleMap(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.queryTRoleList_v3),ReqBody:i};return this.api.npPost(`${this.basePath}/AA0022`,t)}queryRoleRoleList(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.queryRoleRoleList),ReqBody:i};return this.api.npPost(`${this.basePath}/AA0023`,t)}createRTMap_before(){let i={ReqHeader:this.api.getReqHeader(e.Nx.createRTMap),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0110?before`,i)}createRTMap(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.createRTMap),ReqBody:i};return this.api.npPost(`${this.basePath}/DPB0110`,t)}queryRTMapList_ignore1298(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.queryRTMapList),ReqBody:i};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0111`,t)}queryRTMapList(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.queryRTMapList),ReqBody:i};return this.api.npPost(`${this.basePath}/DPB0111`,t)}queryRTMapByPk(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.queryRTMapByPk),ReqBody:i};return this.api.npPost(`${this.basePath}/DPB0112`,t)}updateRTMap_before(){let i={ReqHeader:this.api.getReqHeader(e.Nx.updateRTMap),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0113?before`,i)}updateRTMap(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.updateRTMap),ReqBody:i};return this.api.npPost(`${this.basePath}/DPB0113`,t)}deleteRTMap(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.deleteRTMap),ReqBody:i};return this.api.npPost(`${this.basePath}/DPB0114`,t)}queryRTMapByUk(i){let t={ReqHeader:this.api.getReqHeader(e.Nx.queryRTMapByUk),ReqBody:i};return this.api.npPost(`${this.basePath}/DPB0115`,t)}}return d.\u0275fac=function(i){return new(i||d)(R.LFG(u.K))},d.\u0275prov=R.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);